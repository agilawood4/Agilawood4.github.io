<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>(SQL11)数据库例题选讲 | Destiny's Blog</title><meta name="keywords" content="专业课"><meta name="author" content="Destiny"><meta name="copyright" content="Destiny"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="(SQL11)数据库例题选讲"><meta name="application-name" content="(SQL11)数据库例题选讲"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="(SQL11)数据库例题选讲"><meta property="og:url" content="https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/index.html"><meta property="og:site_name" content="Destiny's Blog"><meta property="og:description" content="数据库往年题知识点整理 嘻嘻，复习了你也不会！ （一）填空+选择题  这部分全是背的知识点，没什么好办法，建议多看几遍 PPT，尤其是 PPT 里面红字标出来的不管多离谱都有可能会考   描述数据静态和动态特性的数据模型要素分别是数据结构和数据操作（数据模型三要素：数据结构，数据操作，完整性约束）"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://agilawood4.github.io/images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2141.jpg"><meta property="article:author" content="Destiny"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://agilawood4.github.io/images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2141.jpg"><meta name="description" content="数据库往年题知识点整理 嘻嘻，复习了你也不会！ （一）填空+选择题  这部分全是背的知识点，没什么好办法，建议多看几遍 PPT，尤其是 PPT 里面红字标出来的不管多离谱都有可能会考   描述数据静态和动态特性的数据模型要素分别是数据结构和数据操作（数据模型三要素：数据结构，数据操作，完整性约束）"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"/images/文章封面48.jpg"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Destiny","link":"链接: ","source":"来源: Destiny's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Destiny's Blog',
  title: '(SQL11)数据库例题选讲',
  postAI: '',
  pageFillDescription: '数据库往年题知识点整理, （一）填空+选择题, （二）简答题, （三）范式题, 求闭包, 求候选码, 求最小依赖集, 把关系模式 R 无损分解且保持函数依赖地分解成 3NF, 判断无损分解, 判断保持函数依赖, （四）SQL语句与关系代数, 例1, 例2, 例3, 例4, （五）E-R 图设计, E-R 图向关系模型的转换, （六）第二轮复习补充内容数据库往年题知识点整理嘻嘻复习了你也不会一填空选择题这部分全是背的知识点没什么好办法建议多看几遍尤其是里面红字标出来的不管多离谱都有可能会考描述数据静态和动态特性的数据模型要素分别是数据结构和数据操作数据模型三要素数据结构数据操作完整性约束数据库系统的核心软件是数据库管理系统常用的逻辑模型你航叫数据模型是关系模型层次模型网状模型其中能直接表示数据之间多对多联系的模型是关系模型关系模型要求必须是规范化关系即每个分量是不可分的数据项三者之间主要区别在于联系的表示方式不同概念模型中实体之间的联系使用联系的名称联系类型等来描述关系数据语言的特点之一是面向集合的存取方式这里的集合指的是满足条件的元组的集合即操作对象是一个或多个关系操作结果也是关系数据的正确性和相容性统称为数据的完整性这个是在数据库安全中的完整性控制讲的数据库的存取控制方法主要有强制存取控制和自主存取控制查询优化中的物理优化指的是选择高效合理的操作算法和存取路径得到优化的查询计划而代数优化指的是通过对关系表达式做等价变换提高查询的效率文件系统缺乏数据和程序之间的独立性且可能会出现数据不一致的问题只是相比于数据库而言本身是有一定的独立性的数据结构化能够使得数据库的数据冗余尽可能小面向全组织的复杂的数据结构数据库对数据安全性的控制通常由实现不需要应用程序的介入有数据库安全子系统由用户权限定义和合法权限检查两部分所组成关系中的每一个分量都必须是不可再分的这里的分量指的是元组中的一个值注意区分关系和关系模式一次封锁法和顺序封锁法是预防死锁的方法等待图法和超时检测法是检测和解除死锁的方法稀疏索引中只有部分索引域搜索码值有对应的索引记录稀疏索引必须是聚集索引即要求搜索码索引域值的顺序和记录在文件中的排列顺序要一一对应树的关键字只分布在叶子结点上且为从左到右递增且每个关键字都有指向下一个关键字的链接树的关键字分布在各个层上树和树索引都限制了每个节点放置关键字或指针的最小和最大个数哈希索引不适用于区间值的检索以及部分匹配检索在数据库恢复中事务内部故障对应反向扫描日志系统故障对应正向扫描日志介质故障需要重新装入数据库副本和对应的日志记录副本介质故障恢复时需要同时用到数据转储和日志其中日志有两个作用其一是对于动态转储需要结合后备副本和转储开始时的日志副本才能把数据库恢复到一致性状态其二是需要装入转储结束到故障点之间的日志重做这段时间内已经完成的事务数据是信息的载体信息是数据的内涵原文信息是所包含的各种数据的意义数据是信息的载体是信息的表现形式在数据库的三级模式中外模式是模式的子集数据管理技术经历了人工管理文件系统数据库系统三个阶段数据库中的完整性约束条件可以定义在关系列元组上事务是数据库恢复和并发控制的基本单位一个应用程序往往包含多个事务用户级权限定义的是关于整个数据库的权限和具体关系无关关系及权限则特制对某个关系或视图的权限自主存取控制即使用预先定义好的用户权限进行存取控制并发调度可能带来的问题丢失修改读出脏数据不能重复读数据模型通常由数据结构数据操作完整性约束三部分组成关系模型必须包含的语义约束为实体完整性和参照完整性数据库管理系统的主要功能包括数据库定义数据存取数据库的运行管理数据组织和存储数据库建立和维护查询执行的步骤查询分析查询检查查询优化查询执行数据库系统和文件系统的本质区别数据库系统实现整体数据的结构化而文件系统中数据是孤立的对系统故障进行恢复时需要正向扫描日志文件并且建立和队列处理多个事务而对事务故障进行恢复时需要反向扫描日志文件只建立队列处理一个事务内的若干操作为维护数据库的完整性应当提供定义完整性约束条件的机制提供完整性检查的方法违约处理课件上定义功能检查功能违约响应数据库具有统一的数据控制功能包括数据的安全性控制完整性控制并发控制多个事务并发调度的可串行化是指这个并发调度的执行结果与某一次序的串行执行它们时的结果相同两段锁协议保证事务并发调度的正确性按照查询的层次可以把查询优化分为代数优化和物理优化查询优化的结果是查询计划数据库时长期存储在计算机内有组织可共享的数据集合文件系统阶段其实已经有了一定的数据独立性只是独立性不如数据库好和人工管理阶段相比已经算有独立性了不能说它一点独立性都没有在执行不相关子查询的时候如果外部查询的候选行有行则内部的嵌套子查询只需要执行一次如果是相关子查询则需要执行次图的冲突分为属性冲突命名冲突同名异义异名同义结构冲突同一对象在不同中有的是实体有的是属性同一实体在不同图中属性个数不同同一实体在不同图中联系类型不同冗余分为数据冗余联系冗余图的集成就是要解决图的冲突和冗余安全运算指的是不产生无限关系和无穷验证的关系运算对应的关系表达式称为安全表达式限制条件称为安全约束关系代数一定是安全运算关系演算则不一定选择运算应该尽可能先做是查询优化策略中最重要最基本的一条不是投影运算查询优化中关系代数表达式的执行有两种方法物化方法和流水线方法数据库设计的两种方法手工试凑法和规范设计法二简答题填空题知识点的版本三级模式结构为什么可以使数据库具有数据独立性和物理独立性外模式模式映像维护某个外模式和模式的对应关系当模式发生改变时外模式模式映像做相应的改变可以使得外模式保持不变外模式模式映像使概念结构变化不必影响用户视图与应用程序确保数据的逻辑独立性模式内模式映象维护内模式和模式之间的对应关系当数据的物理结构和存储方式发生改变时模式内模式映像做相应的改变可以使得模式保持不变模式内模式映像使存储结构变化不必映像概念结构与应用程序确保数据的物理独立性关系模型的三要素是什么关系模型的数据结构关系关系模型的数据操作核心是关系运算包括关系代数和关系演算关系模型的完整性约束包括实体完整性参照完整性用户定义的完整性约束简要介绍什么是日志文件并举例说明为什么日志记录中保存的是更新之前的旧值和更新之后的新值而不是具体的操作命令日志文件为数据库事务恢复而记录的顺序文件保存事务对数据库的关键修改更新信息存值的原因存旧值和新值能让恢复直接变成赋值操作不依赖当前状态例子执行时崩溃在进行恢复的时候如果存操作前后的值我们可以直接把赋值回而如果存操作我们只知道要给加但是当前的值有可能被别的事务修改过因此基于当前的值加有可能得到错误的答案简要介绍数据库的封锁机制并说明数据库为什么要提供多级锁协议封锁机制事务在对某数据对象进行存取之前需要先对系统发出申请请求给该数据对象加锁加锁以后就意味着该事务对其有一定的控制权多级锁协议的作用在并发性与加锁开销复杂度之间找到平衡提高并发控制的灵活性既能粗粒度快速保护大范围数据又能细粒度提高并发简要说明什么是数据库的安全性以及数据库本身提供的维护安全性的方法数据库的安全性保护数据库以防止不合法的使用造成数据泄露更改和破坏其包括两个层面向授权用户提供可靠的信息服务拒绝非授权用户对数据的存取访问以保护数据的可用性完整性安全性从而保障数据库所有者和使用者的合法权益维护安全性的方法用户标识与认证系统提供的保护数据库安全的最外部方法存取控制视图机制为每个用户生成视图把用户对数据的访问限制在一定的视图范围内审计把用户对数据库的操作记录下来存入审计日志中数据加密为防止数据在存储和传输过程中失密采用一定算法把原始数据加密成不可识别的密文简要说明事务的特性是什么并简要介绍两种可以用于维护事务特性的数据库技术事务特性原子性一致性隔离性持续性维护事务特性的技术数据库恢复数据转储和日志并发调度的控制封锁机制事务隔离级别悲观和乐观的并发控制多版本并发控制简要说明什么是意向锁使用意向锁有什么好处意向锁意向锁是加在上级对象上的声明型锁目标是下级对象将要已经被加了或锁好处在对象加锁时不再检查下级节点的封锁只需要检查对象和它的上级节点减少检查的开销让系统能够快速判断是否存在加锁冲突说明基本关系的性质列是同质的即同一列的各个属性值必须来自同一个域拥有相同的数据类型不同列可以出自相同的域每列必须有不同的属性名列的顺序可以互换任意两个元组不能完全相同行的顺序可以互换每一个分量都必须是不可再分的数据这里的分量指的是元组中的值说明各自的要求不允许表中套表每一列都不可再分基础上任何一个非主属性都完全函数依赖于任意一个候选码基础上不存在传递函数依赖基础上如果非平凡函数依赖非平凡函数依赖非平凡函数依赖则中必定包含码如果完全函数依赖完全函数依赖完全函数依赖则本身必定是码它们之间的关系是即简要介绍数据库设计的各个阶段需求分析调查应用环境得到系统目标所需的基础数据及其处理概念结构建立通过对用户需求进行综合归纳抽象得到独立于数据库逻辑结构和具体的概念模型用图描述逻辑结构建立把概念结构转化为某一具体的所支持的数据模型进行优化再将得到的逻辑结构转化为特定的所能处理的模式子模式比如把图转化为关系模式并进行关系模式优化物理结构建立在物理设备上选取合适的存储结构和存取方法建立数据库的物理模式并对物理结构的时空效率进行评价数据库实施建立数据库由执行描述三级模式生成目标模式开发应用程序组织数据入库试运行数据库运行与维护数据库正式运行由进行经常性维护包括数据库转储和恢复数据库控制数据库性能监测数据库重组与重构简要介绍中查询语句执行的一般步骤把查询语句转化为语法树如关系代数语法树查询树把查询树通过关系代数优化转化为优化后的标准形式利用物理优化中的启发式规则优化选取高效合理的存取路径和底层算法得到优化的查询计划再利用物理优化中的代价估计选择代价最小的物理优化的三种形式基于规则的启发式优化基于代价估算的优化前两种优化结合的优化事务的个特性什么情况下会遭到破坏数据库系统中什么采用事务的特性不被破坏原子性造成原子性破坏的主要原因是由于程序故障系统故障和介质故障需要数据库使用日志转储等技术实现恢复机制加以保护一致性造成一致性破坏的原因是事务的原子性被破坏使用数据库恢复和完整性约束机制加以保护隔离性造成隔离性破坏的原因主要是事务并发执行产生的错误使用并发控制机制如封锁锁协议等加以保护持久性造成持续性破坏的原因主要是原子性遭到了破坏使用数据库恢复机制加以保护三范式题送分题把每一类题型的解题模版和套路背下来即可求闭包求解步骤观察题目中要求的属性若是单个属性直接在函数依赖集中寻找能推出的属性若是复合属性则在函数依赖集中求其中包含的单个属性和复合的多个属性所能推出的属性比如当前属性集为我们需要在函数依赖集中分别观察分别能推出什么属性重复上述过程每使用过一个函数依赖以后就将该函数依赖从函数依赖集中划掉并且更新属性将新推出的属性集合作为求下次闭包的条件当闭包属性集满足以下两种条件时闭包终止闭包属性集为全集包含了中所有的属性闭包属性集保持不变例例求候选码求解步骤对于给定关系其中的属性可以划分为四类标签仅出现在函数依赖左部的属性仅出现在函数依赖右部的属性同时出现在函数依赖左部和右部的属性在函数依赖中未出现过的属性对中全体属性和中全体属性的组合并集求关于的属性集闭包若中全体属性和中全体属性关于的属性集闭包包含了中的全部属性即全集则中的全体属性和中的全体属性的组合作为的唯一候选码算法结束若未能推出全集则从中选择新属性加入上面的组合第一轮选取一个属性加入对加入该属性以后的新组合求闭包若能得到全集则在下次迭代时将该属性从中移除不断重复上述迭代第轮迭代向的全体属性和的全体属性的组合中加入中的个属性如果第轮迭代中中已经不足个属性即加入这些属性后闭包保持不变或者中属性为空则算法结束此时候选码为在迭代过程中求闭包为全集的那些属性集例例例求最小依赖集求解步骤将中右边不为单个属性的项全部拆分拆成右边为单个属性左边保持不变逐个删除中的每一个函数依赖对于每一个被删除的函数依赖用剩下的函数依赖求它左边属性的闭包如果求出的闭包不能完全包含右边的属性则不能删除否则立即删除这个函数依赖接下来不再使用最后拆左边不是单属性的函数依赖从左边的属性中依次删除每个属性用剩下的属性去求闭包如果能推出右边的属性则这个属性可以被删除否则需要保留这一步可能需要迭代多轮直到该函数依赖左边的属性集不能再删掉任何一个属性例前两步比较简单我们直接写下面我们进行第三步现在左侧是复合属性的函数依赖有此时我们所有可用的函数依赖为首先对于我们需要分别检验单独的和单独的能否根据上面的推出注意此时仍然是可用的也就是说单独看的时候实际上给我们只需要看能否推出看的时候我们只需要看能否推出即可求出闭包显然都不可以因此二者都不能删除保留接着对于我们需要分别检验单独的和单独的能否根据上面的推出注意此时仍然是可用的也就是说单独看的时候实际上给我们只需要看能否推出看的时候我们只需要看能否推出即可求出闭包显然都不可以因此二者都不能删除保留接着对于我们需要分别检验单独的和单独的能否根据上面的推出注意此时仍然是可用的也就是说单独看的时候实际上给我们只需要看能否推出看的时候我们只需要看能否推出即可这里显然给出单独的时可以由得到接着由得到因此我们可以用单独的来代替原本的因此最终得到的最小依赖集为注意如果存在左部有多个符号的情况我们需要逐个符号去删比如左部符号是我们需要依次先看能否推能否推能否推如果可以则先减掉一个符号再看这两个符号能否进一步化简依次类推直到化到最简把关系模式无损分解且保持函数依赖地分解成注意如果只要求分解到且满足函数依赖不要求满足无损连接在下面算法的基础上删掉添加候选码那一步即可前提需要先求解的最小函数依赖集和候选码步骤对于关系模式先求出的最小依赖集然后把最小依赖集中那些左部相同的关系用合并律合并起来对最小依赖集中的每个依赖用去构成一个模式在构成的模式中如果每个模式都不包含的候选键就把候选键作为一个模式放入模式集合中如果有多个候选键放一个即可观察最后的模式集合中有没有一个模式是另一个模式的子集若有则舍弃这个子集模式否则结束例先求最小函数依赖集根据左部合并函数依赖关系模式分解求候选码这里的关系模式分解其实就是根据进行分解合并左部以后得到此时我们就根据这三个函数依赖对关系模式进行分解即可即得到尝试加入候选键删除子集模式这里中包含和因此不需要把候选键加入同时我们发现是的子集因此需要把删除最后得到的分解为判断无损分解步骤建表将题目中中分解出来子关系模式的个数作为行的个数中给出的属性个数作为列的个数根据题目中分界处的每个根据的属性集合将出现的属性填写为未出现的属性填写为其中是行号是列号根据中的函数依赖修改表原则如下对于函数依赖找对应的那格是并且那格是的将那格改成注意如果不是单属性而是复合属性则必须满足复合属性中的每个单个属性都是否则不成立迭代上述过程直到中的函数依赖全部用完找出是否有一行全都是若存在就是无损分解不存在就是有损分解例因此这是一个有损分解判断保持函数依赖前提会求闭包步骤参照本身先求的中的每个函数依赖的左部属性分别求属性闭包之后参照上面的闭包写出每一个分解中的关系注意这里必须参照第一步求出的的左边属性的闭包且必须是在范围内含有的单个属性或者复合属性才能进行推理若中不存在这些属性那么即便在上述表中存在函数依赖也不能写如果某个一个函数依赖都没有就记为空集对所有求出的取并集将该集合和原本的进行对比若原中函数依赖在中全部存在则结束算法并且判断为保持函数依赖若中有函数依赖在中不存在则对未出现的函数依赖的左边的属性在中求闭包若能推出右部则保持函数依赖推不出则不保持例先把原集中的每一个函数依赖的左部否分别对于整个集合求闭包即分别对求闭包这个闭包的含义即为接着根据这个闭包中所包含的推导关系把和中的每个属性进行扩展得到对应的和对于对于需要注意尽管闭包中有但是对应的和属性都不在本身的集合中此时这样的函数依赖不能加入到中因此对应的是空集最后把和取并集即可发现原本中的函数依赖不在中因此把在中求闭包发现推不出因此该分解并不能保持函数依赖四语句与关系代数使用语句和关系代数相关的运算完成数据库操作主要是查询操作这部分考的比较难也比较灵活需要对语句的各种题型有充分的了解例创建表要求该表定义中主要包含语义完整性约束具体的完整性约束内容根据题意分析决定各字段类型如下字符字符字符整数日期位实数其中小数点后位数字给出对应的建表语句其中是全部数位是小数点后的数位我们需要考虑的约束条件大致分为几个方面主键约束如果是单个属性可以直接在定义后面加上如果是属性组则单独写成外键约束直接单独写成的格式外键可能有多个非空的约束大部分属性都要求非空直接在定义后面加上约束检查值的约束部分整型或浮点型数值要求非负或正直接在定义后面加上或约束检索伊利牌乳制品中出厂价不高于元的商品编号商品名称所有条件都在表中可以找到伊利乳制品检索产品中既有粮食类商品又有食用油类商品的品牌解法同一个需要同时拥有指定的两个种类一个实现思路是先做对的过滤筛选掉不是目标种类的元组再做分组筛选出同时含有两类目标种类的粮食食用油上述的执行顺序是先做条件筛选筛选完以后剩下的元组列都只是粮食或食用油再做分组分组筛选条件是同时拥有这两个种类也就是去重计数恰好为的分组解法一个更加朴素的做法我们需要筛选某个品牌这个种类满足存在一个品牌这个品牌包含粮食类商品且等于品牌存在一个品牌这个品牌包含食用油类商品且等于品牌因此我们可以用两个子句作为条件完成上述查询粮食食用油检索被家含以上零售商购买过的商品类别和具体的购买零售商数量这里的条件是被个零售商购买而统计的目标是针对每个商品类别做的计数因此我们首先想到要分组子句筛选涉及到的属性有商品类别零售商数量二者分别来自和表需要连表查询检索这样的零售商名称该零售商只购买生产工厂和自己在同一个城市的商品先给出一个错误的想法把四个表做连表查询然后令这个查询查出来的是买了和自己在同一个城市商品的零售商而不是只买和自己在同一个城市商品的零售商相当于我们无形中放宽了检索条件但这个大思路是对的我们要找的其实是存在和自己在同一个城市的商品同时不存在和自己不在一个城市的商品的零售商因此我们可以考虑使用一个和一个实现注意在中不等关系使用来表示另一个实现思路是先根据零售商编号进行分组如果一个零售商所购买的零件产地都和它自己所在地相等那么必然这些零件产地的最大值和最小值都会和它自己的所在地相等我们根据和聚合实现筛选注意这里分组的时候之所以要同时用是因为分组检索规定当有的时候所有出现在和中的子句如果是非聚合列都必须在中作为分组依据创建北京地区商品销售视图属性与相同创建视图这里需要一个简单的连表因为我们需要的属性列来自表但是筛选条件来自表需要对这两个表做连表北京在视图中查询至少购买号零售商所购买所有商品的零售商编号这是一类典型的包含问题要求查询至少包含某个对象的某个属性集合的对象我们使用双重否定的方式来做即连用两个即可完成本例等价于筛选这样的零售商编号不存在一件商品使得号零售商购买了它同时不存在当前这个零售商购买这件商品删除年度的商品销售信息本例的关键是怎么确定日期范围年包括到之间的所有日期因此可以直接对日期做比较运算还是针对上面的四个关系用关系代数完成以下查询检索北京零售商所购买商品的详细信息商品的详细信息在表中表示北京零售商的有关信息在表中二者没法直接连接需要借助表做连接具体操作为先在表中做北京地区的筛选再把三个表做自然连接最后投影出中有关商品详细信息的字段北京北京北京这里我们给出的是自然连接当然也可以用显式的条件连接即对和表用字段连接对和用字段连接北京北京北京检索购买了伊利牌所有品种商品的零售商编号和零售商名称本例又是检索包含全部的某个对象涉及这种包含问题的求解时我们通常考虑使用除法解决具体步骤为先求出伊利牌的所有商品名集合接着先做连表投影出所有的零售商编号零售商名称商品名集合最后使用最后再投影出列即可伊利伊利伊利这里我们也可以选择先对做投影只取两列最后就不需要做投影了伊利伊利伊利检索到目前为止还没有零售商购买的商品编号商品名称和商品品牌这也是一类典型的题目要求我们检索没人选没用过的对象我们考虑用全部对象减去有人选用过的对象因为后者往往是以某个表的形式存在的交互记录先在表中找到所有有零售商购买的商品编号接着和做连表得到商品名称和品牌最后用中全部的商品集合与之作差集即可还是针对上面的四个关系用关系演算完成以下查询检索总金额大于万元的销售单号以及所销售商品的商品编号和商品名称元组关系演算遵循以下几个原则表示元组在某个表中存在可以用取元组的某一列可以直接按下标索引下标从开始比如对于关系如果有则有我们筛选的结果以来表示为目标属性的个数比如对于本例则有例创建表创建表要求为字符型个为字符型个为日期型查询既借阅了数据库系统实现又借阅了操作系统原理的同学学号姓名本例和上一例中检索既有粮食类又有食用油类的商品原理相同使用分组检索实现数据库系统实现操作系统原理使用两个实现数据库系统实现操作系统原理查询每个同学都借阅过的书的书名这是典型的分组查询我们考虑如果每个同学都借阅过则如果对每本书按照编号分组那么得到的去重后借阅同学的数量应当和同学总数相同而同学总数可以由表快速得到这里我们把同学总数作为一个子查询的结果返回用于作为筛选条件同时从语法层面而言这个字段不应该写入条件中这里加上主要是从语义层面限制防止有两本书书名相同的情况出现此外本例也可以通过双重否定的方式实现每个同学都查过也隐含一种任意的含义等价为查找一本书不存在这样的同学使得它不存在借过这本书的记录这也是一个很自然的实现思路创建计算机系视图直接创建视图即可要求包含学号姓名书号书名借阅日期注意需要加上筛选条件计算机系计算机系计算机系利用计算机系视图查询借阅过高等数学次数最多的学生学号姓名这里我们需要构建子查询先查询出借阅高等数学最多的同学借书多少次再把这个子查询的结果作为比较条件进行筛选构造子查询如下这里不需要对去重求和因为我们求的就是一个学生可能借高等数学多次高等数学主查询高等数学高等数学也可以用聚集函数完成查询计算机系高等数学计算机系高等数学这里相当于给起一个别名使其可以作为表的一列供后续查询使用本例相当于使用了两层子查询外层是内层是查询计算机系年龄的姓王的同学的学号姓名本例的核心考点是字符串的部分匹配即王姓查找的实现可以使用来实现字符串的部分匹配其中是待匹配的列有两种格式表示以开头后接个或任意多个任意字符表示以开头后接个任意字符王关系代数还是针对上表用关系代数解决下面的查询查询借阅了李明借阅过的所有书的同学学号即查询包含李明借过的所有书的同学的学号对于包含关系的解决显然可以用除法实现李明李明李明查询借阅过线性代数但没借阅过离散数学的同学学号姓名显然使用差集即可先求出集合表示借阅线性代数的同学集合表示借阅离散数学的同学直接令二者作差即可查询借阅过编译原理同学的学号姓名编译原理例检索和产品号为的产品放在一个仓库的产品的产品名称本例是典型的检索和李四年龄相同的同学类的题目我们有三种实现方式其中的实现是最简单的自身连表定义视图包含仓库号产品型号以及该产品型号在每个仓库中存放记录的数量根据最后一条要求显然要分组查询按照产品型号和仓库号两个关键字进行分组其中最后一列是原本不存在的列因此我们需要在视图中显式的指出列名检索海淀区的仓库都存放的产品的产品型号本例的原理类似于检索包含刘晨所选的课的同学的学号类问题使用两个子句实现即检索某个产品使得不存在这样的记录这个记录的仓库地区是海淀且这个仓库不存在存储当前的产品型号海淀昌平区新建一个仓库编号为仓库容量负责人暂时缺省这里我们添加的元组中有效信息只有地区编号容量存在大量缺省列则我们需要显式指出非缺省列的列名否则会默认填写到前三列导致对应错误缺省列默认即为检索存放所有型号的仓库编号和名称显然是要用来解决我们可以先从列的角度思考最后要的是和而除以的列是则被除的列必然是由此我们确定了对应的关系代数表达式这样写已经算对我们也可以写的更优雅一点先用再重新和连表得到最终给结果例检索既选修了数据库又选修了操作系统的学生学号对于这种既又类题目我们先前已经给出了分组检索和使用两个的检索方式分组数据库操作系统数据库操作系统下面我们给出一种用实现的检索方式即先检索选修了其中一门课的学号再判断这个学号在选修了另一门课的学号集合中数据库操作系统检索年龄比李明小三岁的同学的姓名这里默认姓名都不重名本例考察子查询作为检索条件时如果查询结果是单值则可以直接参与比较运算李明检索每个学生超出自己平均成绩的课程的课号只有及格的科目才参与平均成绩计算本例考察基于派生表的查询试想如果我们有一个表用来维护每个学生的学号和平均成绩则可以直接进行连表查询因此我们想到分两步来做先把这个派生表构造出来接着我们用这个派生表和表连表查询即可检索书名中包含数据库的具体信息和总销售量这里存在一本书对应的书籍信息完全相同被不同消费者多次购买的情况因此我们需要按照书籍信息进行分组在组内对每个消费者的购买量做求和运算得到的才是中销售量数据库关键字的使用为聚合查询起别名比如为查询结果起一个派生表名比如上面中的应用五图设计送分题背下来图转关系模式的时候几类联系的转化规则即可图向关系模型的转换图由实体型矩形实体的类型椭圆形实体型之间的联系菱形三个要素组成图向关系模型的转换就是将实体型实体的属性和实体型之间的联系转化为关系模式转换原则一个实体型转换为一个关系模式关系的属性为实体的属性关系的码为实体的码实体型之间联系的转换一个联系可以转换为一个独立的关系模式也可以与任意一端对应的关系模式合并转换为一个独立的关系模式关系的属性与该联系相连的各实体的码以及联系本身的属性关系的候选码每个实体的码都是该关系的候选码与某一端实体对应的关系模式合并合并后关系的属性加入与之有联系的关系也就是联系另一头的关系的码和联系本身的属性合并后关系的码不变一般对于联系我们都采用与某一端的关系模式合并的方法来处理这样可以减少系统中关系的个数尽量避免后续的连表查询一个联系可以转换为一个独立的关系模式也可以与端对应的关系模式合并转换为一个独立的关系模式关系的属性与该联系相连的各实体的码以及联系本身的属性关系的候选码端实体的码与端对应的关系模式合并合并后关系的属性在端关系中加入端关系的码和联系本身的属性合并后关系的码不变一般对于联系我们都采用与端关系模式合并的方法来处理因为这样可以减少系统中关系的个数尽量避免后续的连表查询一个联系只能转换为一个独立的关系模式无法合并到任意一端实体对应的关系模式中关系的属性与该联系相连的各实体的码以及联系本身的属性关系的候选码各实体码的组合示例对于学生和课程实体之间联系为选课我们可以把他转化为以下的关系模式其中学号和课程号是新关系的组合码选修学号课程号成绩选修学号课程号成绩选修学号课程号成绩三个或三个以上实体之间的一个多元联系转换为一个关系模式关系的属性与该联系相连的各实体的码以及联系本身的属性关系的候选码各实体码的组合六第二轮复习补充内容回首向来萧瑟处也无风雨也无晴四种容易混淆的存取方法关系的存取方法进行数据库物理设计时可选择的的存取方法索引方法索引树索引树索引聚集方法也称为聚簇方法哈希方法文件中记录的组织方式堆顺序索引散列聚集表文件所占磁盘块的分配方法连续分配链接分配按簇分配索引分配数据库中数据文件的组织形式堆文件顺序文件散列文件关系数据语言的特点一体化非过程化面向集合的存取方式这里的集合指的是关系关系中元组的集合既可以单独使用也可以与主语言嵌套使用在数据库中用于描述数据逻辑结构的模型是关系模式用于描述数据概念结构的是图前者被称为数据模型后者被称为信息模型概念模型关系模式的建立和优化是在数据库设计的逻辑结构设计阶段完成的对于代数优化而言选择和投影运算越早做中间结果的规模越小一般认为对应的查询效率越高选择大于一切对于参照完整性参考码所在的表称为从表被参考码所在的表称为主表以下操作都有可能破坏参照完整性在从表中插入在从表中修改在主表中修改一定不会破坏参照完整性的操作是在主表中插入关系模式中三种数据模型层次网状关系的主要区别在于联系的表示方式不同关系规范化的目的减少数据冗余保持数据一致性完整性正确性可用性减少存储异常确保存储效率范式等级判断结论所有属性都是主属性或者说码由全部属性构成一定是不一定是只有两个属性一定是只有一个候选键一定是不一定是不存在非主属性一定是用户级权限和关系级权限的授予和收回授予用户级权限收回用户级权限授予关系级权限收回关系级权限二者最显著的区别就是关系级权限的语句中会指明哪个关系演算安全性问题的解决方法对关系演算施加安全性限制只允许存在安全表达式具体方法可以写限制变量取值范围或使用等价的关系代数表达式查询优化选择操作的优化全表扫描法索引扫描法连接操作的优化嵌套循环排序合并索引连接排序操作快速排序法外排序归并法图的结构冲突本质上是同一对象在不同应用中有不同的抽象所造成的数据库是长期存储在计算机内有组织可共享的数据集合数据库的三个特性长期性有组织性可共享性从数学角度看核心的关系运算是并差乘选择投影从数据库角度看核心的关系运算是选择投影连接在数据库中造成数据不一致的根本原因是数据冗余数据库恢复机制的技术包括数据库转储日志基本思想是冗余并发控制机制的技术包括封锁乐观与悲观并发控制方法多版本并发控制方法事务隔离级别基本思想是合理调度并发事务在关系的描述中如果出现形如每个属性有一个属性或每个属性对应一个属性这样的字段则可以认为存在函数依赖多个事务并发调度的可串行化指的是并发调度这些事务的执行结果和按照某一次序串行执行他们的结果相同这样的调度策略称为可串行化调度是数据库定义语言不是数据库操纵语言所有和表结构本身有关的都是所有和表内容有关的才是创建表格视图索引修改表结构删除表格视图索引检索插入删除修改和数据库控制有关包括并发控制安全性控制完整性控制数据库恢复在查询优化中如果想尽可能做到优化选择运算的优先级应当高于投影运算即先做选择再做投影已知向中插入新元组时的语义约束不能为空或部分为空需要满足实体完整性必须分别在表中有对应的值需要满足参照完整性事务处理技术的作用保证事务的特性成立从而保证数据库的一致性和正确性查询优化的目标选择一个高效执行的查询处理策略使得查询代价最小访问磁盘的块数最少查询计划定义了每个操作的算法以及操作的执行顺序数据库系统的组成数据库用户硬件软件的组成语言编译处理程序系统运行控制程序系统建立和维护程序数据字典数据字典称为数据目录或系统目录由一系列表组成存储数据库中有关信息的当前描述包括数据库的三级模式用户名表用户权限等信息关系数据语言功能分类数据查询数据定义数据操纵数据控制关系模型的优化水平分解和垂直分解管理存储的目标最小化磁盘和主存之间传输存储块的数量即最小化磁盘存取次数缓冲区管理器的主要功能是在主存中管理数据库缓冲区负责磁盘页与内存页之间的数据交换通过合理的页面替换策略和预取策略减少磁盘次数提高数据访问效率代数优化的一般准则选择尽早做下推投影尽早做下推消除笛卡尔积连接顺序先小后大尽量推迟昂贵操作查询树优化的思想通过等价变换使得中间结果尽可能小从而减少和计算代价包括选择下推投影下推连接顺序优化笛卡尔积转化为连接四个核心',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-01-17 16:13:56',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Destiny's Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)" rel="external nofollow noreferrer">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/LLM%E4%B8%8E%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">LLM与强化学习<sup>4</sup></a><a href="/tags/Python%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">Python与机器学习<sup>31</sup></a><a href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" style="font-size: 1.05rem;">专业课<sup>33</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>28</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2026/01/"><span class="card-archive-list-date">一月 2026</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">12</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">九月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">八月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">26</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">七月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">21</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);" rel="external nofollow noreferrer"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%B8%93%E4%B8%9A%E8%AF%BE/" itemprop="url">专业课</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>专业课</span></a></span></div></div><h1 class="post-title" itemprop="name headline">(SQL11)数据库例题选讲</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-11-15T03:08:52.000Z" title="发表于 2025-11-15 11:08:52">2025-11-15</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2026-01-17T08:13:56.555Z" title="更新于 2026-01-17 16:13:56">2026-01-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为香波地群岛"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>香波地群岛</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2141.jpg"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/"><header><a class="post-meta-categories" href="/categories/%E4%B8%93%E4%B8%9A%E8%AF%BE/" itemprop="url">专业课</a><a href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" tabindex="-1" itemprop="url">专业课</a><h1 id="CrawlerTitle" itemprop="name headline">(SQL11)数据库例题选讲</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Destiny</span><time itemprop="dateCreated datePublished" datetime="2025-11-15T03:08:52.000Z" title="发表于 2025-11-15 11:08:52">2025-11-15</time><time itemprop="dateCreated datePublished" datetime="2026-01-17T08:13:56.555Z" title="更新于 2026-01-17 16:13:56">2026-01-17</time></header><h1><strong>数据库往年题知识点整理</strong></h1>
<p>嘻嘻，复习了你也不会！</p>
<h2 id="一-填空-选择题"><strong>（一）填空+选择题</strong></h2>
<blockquote>
<p>这部分全是背的知识点，没什么好办法，建议多看几遍 PPT，尤其是 PPT 里面红字标出来的不管多离谱都有可能会考</p>
</blockquote>
<ul>
<li>描述数据静态和动态特性的数据模型要素分别是<strong>数据结构</strong>和<strong>数据操作</strong>（数据模型三要素：数据结构，数据操作，完整性约束）</li>
<li>数据库系统的核心软件是<strong>数据库管理系统</strong>（DBMS）</li>
<li>常用的逻辑模型（你航叫数据模型）是关系模型，层次模型，网状模型，其中能直接表示数据之间多对多联系的模型是<strong>关系模型</strong>，关系模型要求必须是规范化关系，即每个分量是不可分的数据项，三者之间主要区别在于<strong>联系的表示方式不同</strong></li>
<li>概念模型中，实体之间的联系使用联系的名称，<strong>联系类型</strong>（1:1,1:N,M:N 等）来描述</li>
<li>关系数据语言的特点之一是面向集合的存取方式，这里的集合指的是满足条件的<strong>元组的集合</strong>，即操作对象是一个或多个关系，操作结果也是关系</li>
<li>数据的正确性和相容性统称为数据的<strong>完整性</strong>（这个是在 P4 数据库安全中的完整性控制讲的）</li>
<li>数据库的存取控制方法主要有<strong>强制存取控制</strong>（MAC）和<strong>自主存取控制</strong>（DAC）</li>
<li>查询优化中的<strong>物理优化</strong>指的是选择高效合理的操作算法和存取路径，得到优化的查询计划，而<strong>代数优化</strong>指的是通过对关系表达式做等价变换，提高查询的效率</li>
<li>文件系统缺乏数据和程序之间的独立性，且可能会出现数据不一致的问题（只是相比于数据库而言，本身是有一定的独立性的）</li>
<li>数据结构化能够使得数据库的<strong>数据冗余</strong>尽可能小（面向全组织的复杂的数据结构）</li>
<li>数据库对数据安全性的控制通常由 DBMS 实现，不需要应用程序的介入，DBMS 有数据库安全子系统，由用户权限定义和合法权限检查两部分所组成</li>
<li>关系中的每一个分量都必须是不可再分的，这里的分量指的是<strong>元组</strong>中的一个值（注意区分关系和关系模式）</li>
<li>一次封锁法和顺序封锁法是<strong>预防</strong>死锁的方法，等待图法和超时检测法是<strong>检测和解除</strong>死锁的方法</li>
<li>稀疏索引中只有部分索引域 / 搜索码值有对应的索引记录，稀疏索引必须是聚集索引，即要求搜索码 / 索引域值的顺序和记录在文件中的排列顺序要一一对应</li>
<li>B+ 树的关键字只分布在<strong>叶子结点</strong>上（且为从左到右递增，且每个关键字都有指向下一个关键字的链接），B 树的关键字分布在<strong>各个层</strong>上</li>
<li>B 树和 B+ 树索引都限制了每个节点放置<strong>关键字或指针</strong>的最小和最大个数</li>
<li>哈希索引不适用于区间值的检索，以及部分匹配检索</li>
<li>在数据库恢复中，事务内部故障对应 UNDO（反向扫描日志），系统故障对应 UNDO + REDO（正向扫描日志），介质故障需要重新装入数据库副本和对应的日志记录副本</li>
<li>介质故障恢复时需要同时用到<strong>数据转储</strong>和<strong>日志</strong>，其中日志有两个作用，其一是对于动态转储，需要结合后备副本和转储开始时的日志副本才能把数据库恢复到一致性状态；其二是需要装入转储结束到故障点之间的日志，重做这段时间内已经完成的事务</li>
<li>数据是信息的载体，信息是数据的内涵（原文：信息是所包含的各种数据的意义，数据是信息的载体，是信息的表现形式）</li>
<li>在数据库的三级模式中，外模式是模式的<strong>子集</strong></li>
<li>数据管理技术经历了<strong>人工管理</strong>，<strong>文件系统</strong>，<strong>数据库系统</strong>三个阶段</li>
<li>数据库中的完整性约束条件可以定义在<strong>关系，列，元组</strong>上</li>
<li>事务是数据库恢复和并发控制的基本单位，一个应用程序往往包含多个事务</li>
<li>用户级权限定义的是关于整个数据库的权限，和具体关系无关；关系及权限则特制对某个关系或视图的权限，自主存取控制即使用预先定义好的用户权限进行存取控制</li>
<li>并发调度可能带来的问题：丢失修改，读出脏数据，不能重复读</li>
<li>数据模型通常由<strong>数据结构</strong>，<strong>数据操作</strong>，<strong>完整性约束</strong>三部分组成</li>
<li>关系模型必须包含的<strong>语义约束</strong>为实体完整性和参照完整性</li>
<li>数据库管理系统 DBMS 的主要功能包括：数据库定义，数据存取，数据库的运行管理，数据组织和存储，数据库建立和维护</li>
<li>查询执行的步骤：查询分析，查询检查，查询优化，查询执行</li>
<li>数据库系统和文件系统的本质区别：数据库系统实现整体数据的结构化，而文件系统中数据是孤立的</li>
<li>对系统故障进行恢复时，需要<strong>正向</strong>扫描日志文件，并且建立 UNDO 和 REDO 队列（处理多个事务）；而对事务故障进行恢复时，需要<strong>反向</strong>扫描日志文件，只建立 UNDO 队列（处理一个事务内的若干操作）</li>
<li>为维护数据库的完整性，DBMS 应当提供定义完整性约束条件的机制，提供完整性检查的方法，违约处理（课件上：定义功能，检查功能，违约响应）</li>
<li>数据库具有统一的数据控制功能，包括数据的安全性控制，完整性控制，并发控制</li>
<li>多个事务并发调度的可串行化，是指这个并发调度的执行结果与某一次序的<strong>串行执行</strong>它们时的结果相同，<strong>两段锁协议</strong>保证事务并发调度的正确性</li>
<li>按照查询的<strong>层次</strong>可以把查询优化分为代数优化和物理优化，查询优化的结果是<strong>查询计划</strong></li>
<li>数据库时<strong>长期</strong>存储在计算机内<strong>有组织</strong>，<strong>可共享</strong>的数据集合</li>
<li>文件系统阶段其实已经有了一定的数据独立性，只是独立性不如数据库好，和人工管理阶段相比已经算有独立性了，不能说它一点独立性都没有</li>
<li>在执行不相关子查询的时候，如果外部查询的候选行有 20 行，则内部的嵌套子查询只需要执行一次；如果是相关子查询，则需要执行 20 次</li>
<li>E-R 图的冲突分为<strong>属性冲突</strong>，<strong>命名冲突</strong>（同名异义，异名同义），<strong>结构冲突</strong>（同一对象在不同 E-R 中有的是实体有的是属性，同一实体在不同 E-R 图中属性个数不同，同一实体在不同 E-R 图中联系类型不同），冗余分为<strong>数据冗余</strong>，<strong>联系冗余</strong>，E-R 图的集成就是要解决 E-R 图的冲突和冗余</li>
<li>安全运算指的是不产生<strong>无限关系</strong>和<strong>无穷验证</strong>的关系运算，对应的关系表达式称为安全表达式，限制条件称为安全约束，关系代数一定是安全运算，关系演算则不一定</li>
<li><strong>选择</strong>运算应该尽可能先做，是查询优化策略中最重要，最基本的一条（不是投影运算）</li>
<li>查询优化中关系代数表达式的执行有两种方法：物化方法和流水线方法</li>
<li>数据库设计的两种方法：手工试凑法和规范设计法</li>
</ul>
<h2 id="二-简答题"><strong>（二）简答题</strong></h2>
<blockquote>
<p>填空题知识点的 Plus 版本</p>
</blockquote>
<p>（1）三级模式结构为什么可以使数据库具有数据独立性和物理独立性</p>
<ul>
<li>外模式 / 模式映像维护某个外模式和模式的对应关系，当模式发生改变时，外模式 / 模式映像做相应的改变，可以使得外模式保持不变（外模式/模式映像使概念结构变化不必影响用户视图与应用程序，确保数据的逻辑独立性）</li>
<li>模式 / 内模式映象维护内模式和模式之间的对应关系，当数据的物理结构和存储方式发生改变时，模式 / 内模式映像做相应的改变，可以使得模式保持不变（模式/内模式映像使存储结构变化不必映像概念结构与应用程序，确保数据的物理独立性）</li>
</ul>
<p>（2）关系模型的三要素是什么</p>
<ul>
<li>关系模型的数据结构（<strong>关系</strong>），关系模型的数据操作（核心是<strong>关系运算</strong>，包括关系代数和关系演算），关系模型的完整性约束（包括实体完整性，参照完整性，用户定义的完整性约束）</li>
</ul>
<p>（3）简要介绍什么是日志文件，并举例说明为什么日志记录中保存的是更新之前的旧值和更新之后的新值，而不是具体的操作命令</p>
<ul>
<li>日志文件：为数据库事务恢复而记录的顺序文件，保存事务对数据库的关键修改/更新信息</li>
<li>存值的原因：存旧值和新值能让恢复直接变成<strong>赋值</strong>操作，不依赖当前状态</li>
<li>例子：<code>A=100, A=A-100</code>执行时崩溃，在进行恢复的时候，如果存操作前后的值，我们可以直接把 A 赋值回 100，而如果存操作，我们只知道要给 A 加 100，但是 A 当前的值有可能被别的事务修改过，因此基于 A 当前的值加 100 有可能得到错误的答案</li>
</ul>
<p>（4）简要介绍数据库的封锁机制，并说明数据库为什么要提供多级锁协议</p>
<ul>
<li>封锁机制：事务 T 在对某数据对象进行存取之前，需要先对系统发出申请，请求给该数据对象加锁，加锁以后就意味着该事务对其有一定的控制权</li>
<li>多级锁协议的作用：
<ul>
<li>在并发性与加锁开销 / 复杂度之间找到平衡，提高并发控制的灵活性</li>
<li>既能粗粒度快速保护大范围数据，又能细粒度提高并发</li>
</ul>
</li>
</ul>
<p>（5）简要说明什么是数据库的安全性，以及数据库本身提供的维护安全性的方法</p>
<ul>
<li>数据库的安全性：保护数据库以防止不合法的使用造成数据泄露，更改和破坏，其包括两个层面：
<ul>
<li>向授权用户提供可靠的信息服务</li>
<li>拒绝非授权用户对数据的存取访问，以保护数据的可用性，完整性，安全性，从而保障数据库所有者和使用者的合法权益</li>
</ul>
</li>
<li>维护安全性的方法：用户标识与认证（系统提供的保护数据库安全的最外部方法），存取控制，视图机制（为每个用户生成视图，把用户对数据的访问限制在一定的视图范围内），审计（把用户对数据库的操作记录下来存入审计日志中），数据加密（为防止数据在存储和传输过程中失密，采用一定算法把原始数据加密成不可识别的密文）</li>
</ul>
<p>（6）简要说明事务的特性是什么，并简要介绍两种可以用于维护事务特性的数据库技术</p>
<ul>
<li>事务特性（ACID）：原子性，一致性，隔离性，持续性</li>
<li>维护事务特性的技术：数据库恢复（数据转储和日志），并发调度的控制（封锁机制，事务隔离级别，悲观和乐观的并发控制，多版本并发控制）</li>
</ul>
<p>（7）简要说明什么是意向锁，使用意向锁有什么好处</p>
<ul>
<li>意向锁：意向锁是加在上级对象上的<strong>声明型锁</strong>目标是下级对象将要 / 已经被加了 S 或 X 锁</li>
<li>好处：在对象加锁时，不再检查下级节点的封锁，只需要检查对象和它的上级节点，减少检查的开销，让系统能够快速判断是否存在加锁冲突</li>
</ul>
<p>（8）说明基本关系的性质</p>
<ul>
<li>列是同质的，即同一列的各个属性值必须来自同一个域，拥有相同的数据类型</li>
<li>不同列可以出自相同的域，每列必须有不同的属性名</li>
<li>列的顺序可以互换</li>
<li>任意两个元组不能完全相同</li>
<li>行的顺序可以互换</li>
<li>每一个分量都必须是不可再分的数据（这里的分量指的是元组中的值）</li>
</ul>
<p>（9）说明 1NF, 2NF, 3NF, BCNF 各自的要求</p>
<ul>
<li>1NF：不允许表中套表，每一列都不可再分</li>
<li>2NF：1NF 基础上，任何一个非主属性都完全函数依赖于任意一个候选码</li>
<li>3NF：2NF 基础上，不存在传递函数依赖</li>
<li>BCNF：1NF 基础上，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mtext>非平凡函数依赖</mtext></mpadded></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\xrightarrow{非平凡函数依赖}Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1113309999999998em;vertical-align:-0.010999999999999899em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.100331em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord cjk_fallback mtight">非</span><span class="mord cjk_fallback mtight">平</span><span class="mord cjk_fallback mtight">凡</span><span class="mord cjk_fallback mtight">函</span><span class="mord cjk_fallback mtight">数</span><span class="mord cjk_fallback mtight">依</span><span class="mord cjk_fallback mtight">赖</span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.010999999999999899em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span> 中必定包含码；如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mtext>完全函数依赖</mtext></mpadded></mover><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\xrightarrow{完全函数依赖}Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1113309999999998em;vertical-align:-0.010999999999999899em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.100331em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord cjk_fallback mtight">完</span><span class="mord cjk_fallback mtight">全</span><span class="mord cjk_fallback mtight">函</span><span class="mord cjk_fallback mtight">数</span><span class="mord cjk_fallback mtight">依</span><span class="mord cjk_fallback mtight">赖</span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.010999999999999899em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，则 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span></span></span></span> 本身必定是码</li>
<li>它们之间的关系是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi><mo>⊂</mo><mn>3</mn><mi>N</mi><mi>F</mi><mo>⊂</mo><mn>2</mn><mi>N</mi><mi>F</mi><mo>⊂</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">BCNF\subset3NF\subset2NF\subset1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⊂</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi><mo>⇒</mo><mn>3</mn><mi>N</mi><mi>F</mi><mo>⇒</mo><mn>2</mn><mi>N</mi><mi>F</mi><mo>⇒</mo><mn>1</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">BCNF\Rightarrow3NF\Rightarrow2NF\Rightarrow1NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
</ul>
<p>（10）简要介绍数据库设计的各个阶段</p>
<ul>
<li>需求分析：调查应用环境，得到系统目标所需的基础数据及其处理</li>
<li>概念结构建立：通过对用户需求进行综合，归纳，抽象，得到独立于数据库逻辑结构和具体 DBMS 的概念模型，用 E-R 图描述</li>
<li>逻辑结构建立：把概念结构转化为某一具体的 DBMS 所支持的数据模型，进行优化，再将得到的逻辑结构转化为特定的 DBMS 所能处理的模式，子模式（比如把 E-R 图转化为关系模式，并进行关系模式优化）</li>
<li>物理结构建立：在物理设备上选取合适的存储结构和存取方法，建立数据库的物理模式，并对物理结构的时空效率进行评价</li>
<li>数据库实施：建立数据库，由 DBMS 执行 DDL 描述三级模式，生成目标模式，开发应用程序，组织数据入库试运行</li>
<li>数据库运行与维护：数据库正式运行，由 DBA 进行经常性维护，包括数据库转储和恢复，数据库控制，数据库性能监测，数据库重组与重构</li>
</ul>
<p>（11）简要介绍 SQL 中查询语句执行的一般步骤</p>
<ul>
<li>把查询语句转化为语法树，如关系代数语法树（查询树）</li>
<li>把查询树通过关系代数优化转化为优化后的标准形式</li>
<li>利用物理优化中的启发式规则优化，选取高效合理的存取路径和底层算法，得到优化的查询计划，再利用物理优化中的代价估计，选择代价最小的</li>
</ul>
<p>物理优化的三种形式：基于规则的启发式优化，基于代价估算的优化，前两种优化<strong>结合</strong>的优化</p>
<p>（12）事务的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span> 个特性什么情况下会遭到破坏，数据库系统中什么采用事务的特性不被破坏</p>
<ul>
<li>原子性：造成原子性破坏的主要原因是由于程序故障，系统故障和介质故障（需要数据库使用日志，转储等技术实现恢复机制加以保护）</li>
<li>一致性：造成一致性破坏的原因是事务的原子性被破坏（使用数据库恢复和完整性约束机制加以保护）</li>
<li>隔离性：造成隔离性破坏的原因主要是事务并发执行产生的错误（使用并发控制机制，如封锁，锁协议等加以保护）</li>
<li>持久性：造成持续性破坏的原因主要是原子性遭到了破坏（使用数据库恢复机制加以保护）</li>
</ul>
<h2 id="三-范式题"><strong>（三）范式题</strong></h2>
<blockquote>
<p>送分题，把每一类题型的解题模版和套路背下来即可</p>
</blockquote>
<h3 id="求闭包"><strong>求闭包</strong></h3>
<p>求解步骤：</p>
<ul>
<li>观察题目中要求的属性：
<ul>
<li>若是单个属性直接在函数依赖集 F 中寻找能推出的属性；</li>
<li>若是复合属性则在函数依赖集 F 中求其中包含的单个属性和复合的多个属性所能推出的属性（比如当前属性集为 ABC，我们需要在函数依赖集中分别观察 A B C AB BC AC ABC 分别能推出什么属性）</li>
</ul>
</li>
<li>重复上述过程，每使用过一个函数依赖以后，就将该函数依赖从函数依赖集 F 中划掉，并且更新属性，将新推出的属性集合作为求下次闭包的条件</li>
<li>当闭包属性集满足以下两种条件时，闭包终止：
<ul>
<li>闭包属性集为全集 U（包含了 R 中所有的属性）</li>
<li>闭包属性集保持不变</li>
</ul>
</li>
</ul>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115112522422.png" alt="image-20251115112522422"></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mo>+</mo></msup><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo separator="true">,</mo><mi>D</mi><mo separator="true">,</mo><mi>E</mi><mo separator="true">,</mo><mi>G</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">A^+ = \{A,B,C,D,E,G\}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.821331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mclose">}</span></span></span></span></span></p>
<p><strong>例2</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115112602701.png" alt="image-20251115112602701"></p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mi>A</mi><mi>B</mi><msup><mo stretchy="false">}</mo><mo>+</mo></msup><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{AB\}^+=\{A,B,C\}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.071331em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">}</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.821331em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">}</span></span></span></span></span></p>
<h3 id="求候选码"><strong>求候选码</strong></h3>
<p>求解步骤：</p>
<p>（1）对于给定关系 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>&lt;</mo><mi>U</mi><mo separator="true">,</mo><mi>F</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">R&lt;U,F&gt;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72243em;vertical-align:-0.0391em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span></span></span></span>，其中的属性可以划分为四类标签：</p>
<ul>
<li>L：仅出现在函数依赖左部的属性</li>
<li>R：仅出现在函数依赖右部的属性</li>
<li>LR：同时出现在函数依赖左部和右部的属性</li>
<li>N：在函数依赖中未出现过的属性</li>
</ul>
<p>（2）对 L 中全体属性和 N 中全体属性的组合（并集），求关于 F 的属性集闭包</p>
<p>（3）若 L 中全体属性和 N 中全体属性关于 F 的属性集闭包，包含了 R 中的全部属性（即全集 U），则 L 中的全体属性和 N 中的全体属性的组合作为 R 的唯一候选码，算法结束</p>
<p>（4）若未能推出全集 U，则从 LR 中选择新属性加入上面的组合，第一轮选取一个属性加入，对加入该属性以后的新组合求闭包，若能得到全集 U，则在下次迭代时将该属性从 LR 中移除</p>
<p>（5）不断重复上述迭代，第 k 轮迭代向 L 的全体属性和 N 的全体属性的组合中加入 LR 中的 k 个属性，如果第 k 轮迭代中，LR 中已经不足 k 个属性（即加入这些属性后闭包保持不变），或者 LR 中属性为空，则算法结束，此时候选码为在迭代过程中求闭包为全集 U 的<strong>那些</strong>属性集</p>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113740002.png" alt="image-20251115113740002"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113758326.png" alt="image-20251115113758326"></p>
<p><strong>例2</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113822000.png" alt="image-20251115113822000"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113851748.png" alt="image-20251115113851748"></p>
<p><strong>例3</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113908097.png" alt="image-20251115113908097"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115113219267.png" alt="image-20251115113219267"></p>
<h3 id="求最小依赖集"><strong>求最小依赖集</strong></h3>
<p>求解步骤：</p>
<ul>
<li>将 F 中右边不为单个属性的项全部拆分，拆成右边为单个属性，左边保持不变</li>
<li>逐个删除 F 中的每一个函数依赖，对于每一个被删除的函数依赖，用剩下的函数依赖求它左边属性的闭包，如果求出的闭包不能完全包含<strong>右边的属性</strong>，则不能删除，否则立即删除这个函数依赖，接下来不再使用</li>
<li>最后拆左边不是单属性的函数依赖，从左边的属性中依次删除每个属性，用剩下的属性去求闭包，如果能推出<strong>右边的属性</strong>，则这个属性可以被删除，否则需要保留，这一步可能需要迭代多轮，直到该函数依赖左边的属性集不能再删掉任何一个属性</li>
</ul>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115154242812.png" alt="image-20251115154242812"></p>
<p>前两步比较简单，我们直接写</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115154912504.png" alt="image-20251115154912504"></p>
<p>下面我们进行第三步，现在左侧是复合属性的函数依赖有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>G</mi><mo>→</mo><mi>C</mi><mo separator="true">,</mo><mtext>  </mtext><mi>B</mi><mi>D</mi><mo>→</mo><mi>E</mi><mo separator="true">,</mo><mtext>  </mtext><mi>A</mi><mi>G</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">DG\rightarrow C,\;BD\rightarrow E,\;AG\rightarrow B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></p>
<p>此时我们所有可用的函数依赖为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mo stretchy="false">{</mo><mi>B</mi><mo>→</mo><mi>D</mi><mo separator="true">,</mo><mi>D</mi><mi>G</mi><mo>→</mo><mi>C</mi><mo separator="true">,</mo><mi>B</mi><mi>D</mi><mo>→</mo><mi>E</mi><mo separator="true">,</mo><mi>A</mi><mi>G</mi><mo>→</mo><mi>B</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F=\{B\rightarrow D,DG\rightarrow C,BD\rightarrow E,AG\rightarrow B\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">}</span></span></span></span></p>
<p>首先对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>G</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">DG\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span>：</p>
<ul>
<li>我们需要分别检验单独的 D 和单独的 G 能否根据上面的 F 推出 C，<strong>注意</strong>，此时 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>G</mi><mo>→</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">DG\rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span> 仍然是可用的</li>
<li>也就是说单独看 D 的时候，实际上给我们只需要看能否推出 G，看 G 的时候，我们只需要看能否推出 D 即可</li>
<li>求出闭包 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>D</mi><mo>+</mo></msup><mo>=</mo><mi>D</mi><mo separator="true">,</mo><mtext>  </mtext><msup><mi>G</mi><mo>+</mo></msup><mo>=</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">D^+ = D,\;G^+ = G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9657709999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span>，显然都不可以，因此二者都不能删除，$DG\rightarrow $C 保留</li>
</ul>
<p>接着对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>G</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">AG\rightarrow B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>：</p>
<ul>
<li>我们需要分别检验单独的 A 和单独的 G 能否根据上面的 F 推出 B，<strong>注意</strong>，此时 $ AG\rightarrow B$ 仍然是可用的</li>
<li>也就是说单独看 A 的时候，实际上给我们只需要看能否推出 G，看 G 的时候，我们只需要看能否推出 A 即可</li>
<li>求出闭包 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>A</mi><mo>+</mo></msup><mo>=</mo><mi>A</mi><mo separator="true">,</mo><mtext>  </mtext><msup><mi>G</mi><mo>+</mo></msup><mo>=</mo><mi>G</mi></mrow><annotation encoding="application/x-tex">A^+ = A,\;G^+ = G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.771331em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.9657709999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.771331em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">+</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span>，显然都不可以，因此二者都不能删除，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>G</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">AG\rightarrow B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span> 保留</li>
</ul>
<p>接着对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>D</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">BD\rightarrow E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>：</p>
<ul>
<li>我们需要分别检验单独的 B 和单独的 D 能否根据上面的 F 推出 E，<strong>注意</strong>，此时 $ BD\rightarrow E$ 仍然是可用的</li>
<li>也就是说单独看 B 的时候，实际上给我们只需要看能否推出 D，看 D 的时候，我们只需要看能否推出 B 即可</li>
<li>这里显然给出单独的 B 时，可以由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>→</mo><mi>D</mi></mrow><annotation encoding="application/x-tex">B\rightarrow D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span></span></span></span> 得到 D，接着由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>D</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">BD\rightarrow E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span> 得到 E，因此我们可以用单独的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">B\rightarrow E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span> 来代替原本的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>D</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">BD\rightarrow E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span></li>
</ul>
<p>因此最终得到的最小依赖集为：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mo stretchy="false">{</mo><mi>B</mi><mo>→</mo><mi>E</mi><mo separator="true">,</mo><mtext>  </mtext><mi>B</mi><mo>→</mo><mi>D</mi><mo separator="true">,</mo><mtext>  </mtext><mi>D</mi><mi>G</mi><mo>→</mo><mi>C</mi><mo separator="true">,</mo><mtext>  </mtext><mi>A</mi><mi>G</mi><mo>→</mo><mi>B</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F=\{B\rightarrow E,\;B\rightarrow D,\;DG\rightarrow C,\;AG\rightarrow B\}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mclose">}</span></span></span></span></span></p>
<p><strong>注意</strong>：如果存在左部有多个符号的情况，我们需要逐个符号去删，比如左部符号是 ABC，我们需要依次先看 AB 能否推 C，AC 能否推 B，BC 能否推 A，如果可以则先减掉一个符号，再看这两个符号能否进一步化简，依次类推直到化到最简</p>
<h3 id="把关系模式-r-无损分解且保持函数依赖地分解成-3nf"><strong>把关系模式 R 无损分解且保持函数依赖地分解成 3NF</strong></h3>
<p><strong>注意</strong>：如果只要求分解到 3NF 且满足函数依赖，不要求满足无损连接，在下面算法的基础上，删掉添加候选码那一步即可！</p>
<p>前提：需要先求解 R 的最小函数依赖集和候选码</p>
<p>步骤：</p>
<p>（1）对于关系模式 R，先求出 F 的最小依赖集，然后把最小依赖集中那些左部相同的关系 F 用合并律合并起来</p>
<p>（2）对最小依赖集中的每个依赖 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mi>D</mi><mo>:</mo><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">FD:X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span> 去构成一个模式 XY</p>
<p>（3）在构成的模式中，如果每个模式都不包含 R 的候选键，就把候选键作为一个模式放入模式集合中（如果有多个候选键<strong>放一个</strong>即可）</p>
<p>（4）观察最后的模式集合中，有没有一个模式是另一个模式的子集，若有，则舍弃这个子集模式，否则结束</p>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115161505317.png" alt="image-20251115161505317"></p>
<p>（1）先求最小函数依赖集</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115161445203.png" alt="image-20251115161445203"></p>
<p>（2,3）根据左部合并函数依赖+关系模式分解+求候选码</p>
<p>这里的关系模式分解其实就是根据 F 进行分解，F 合并左部以后得到：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mo>→</mo><mi>B</mi><mi>C</mi><mo separator="true">,</mo><mi>A</mi><mi>D</mi><mo>→</mo><mi>E</mi><mo separator="true">,</mo><mi>E</mi><mo>→</mo><mi>D</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">F=\{A\rightarrow BC,AD\rightarrow E,E\rightarrow D\}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mclose">}</span></span></span></span></span></p>
<p>此时我们就根据这三个函数依赖，对关系模式进行分解即可，即得到</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mi>B</mi><mi>C</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">(</mo><mi>A</mi><mi>D</mi><mi>E</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>R</mi><mo stretchy="false">(</mo><mi>D</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(ABC), R(ADE),R(DE)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></span></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115161837757.png" alt="image-20251115161837757"></p>
<p>（4）尝试加入候选键+删除子集模式</p>
<p>这里 R2 中包含 AD 和 AE，因此不需要把候选键加入，同时我们发现 R3 是 R2 的子集，因此需要把 R3 删除，最后得到的 3NF 分解为：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mn>1</mn><mo stretchy="false">(</mo><mi>A</mi><mi>B</mi><mi>C</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>R</mi><mn>2</mn><mo stretchy="false">(</mo><mi>A</mi><mi>D</mi><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R1(ABC),R2(ADE)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord">1</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord">2</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="判断无损分解"><strong>判断无损分解</strong></h3>
<p>步骤：</p>
<ul>
<li>建表：将题目中 R 中分解出来子关系模式的个数作为行的个数，R 中给出的属性个数作为列的个数</li>
<li>根据题目中分界处的每个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，根据 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的属性集合，将出现的属性填写为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，未出现的属性填写为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">b_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，其中 i 是行号，j 是列号</li>
<li>根据 F 中的函数依赖，修改表，原则如下：
<ul>
<li>对于函数依赖 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding="application/x-tex">X\rightarrow Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span></span></span></span>，找对应的 X 那格是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 并且 Y 那格是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>b</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">b_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span> 的，将 Y 那格改成 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，<strong>注意</strong>：如果 X 不是单属性而是复合属性，则必须满足复合属性中的每个单个属性都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，否则不成立</li>
<li>迭代上述过程，直到 F 中的函数依赖全部用完</li>
</ul>
</li>
<li>找出是否有一行全都是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">a_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>，若存在就是无损分解，不存在就是有损分解</li>
</ul>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115163123082.png" alt="image-20251115163123082"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115163624864.png" alt="image-20251115163624864"></p>
<p>因此这是一个有损分解</p>
<h3 id="判断保持函数依赖"><strong>判断保持函数依赖</strong></h3>
<p>前提：会求闭包</p>
<p>步骤：</p>
<ul>
<li>参照 F 本身，先求 F 的中的每个函数依赖的左部属性分别求属性闭包</li>
<li>之后参照上面的闭包，写出每一个分解 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 中的关系 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">F_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，<strong>注意</strong>，这里必须参照第一步求出的 F 的左边属性的闭包，且必须是在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 范围内含有的单个属性或者复合属性才能进行推理，若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 中不存在这些属性，那么即便在上述表中存在函数依赖，也不能写，如果某个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">R_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 一个函数依赖都没有，就记为空集</li>
<li>对所有求出的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">F_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 取并集 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span></span></span></span>，将该集合和原本的 F 进行对比，若原 F 中函数依赖在 G 中全部存在，则结束算法并且判断为保持函数依赖；若 F 中有函数依赖在 G 中不存在，则对未出现的函数依赖的左边的属性在 G 中求闭包，若能推出<strong>右部</strong>则保持函数依赖；推不出，则不保持</li>
</ul>
<p><strong>例1</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115164522944.png" alt="image-20251115164522944"></p>
<p>先把原 F 集中的每一个函数依赖的左部否分别对于整个 F 集合求闭包，即分别对 B D A AC 求闭包，这个闭包的含义即为：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>:</mo><mi>B</mi><mo>→</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo>→</mo><mi>E</mi><mspace linebreak="newline"></mspace><mi>D</mi><mo>:</mo><mi>D</mi><mo>→</mo><mi>A</mi><mo separator="true">,</mo><mi>D</mi><mo>→</mo><mi>E</mi><mspace linebreak="newline"></mspace><mi>A</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>E</mi><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><mi>A</mi><mi>C</mi><mo stretchy="false">)</mo><mo>:</mo><mi>A</mi><mi>C</mi><mo>→</mo><mi>B</mi><mo separator="true">,</mo><mi>A</mi><mi>C</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">B:B\rightarrow A,B\rightarrow E\\
D:D\rightarrow A,D\rightarrow E\\
A:A\rightarrow E\\
(AC):AC\rightarrow B,AC\rightarrow E
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span></span></p>
<p>接着根据这个闭包中所包含的推导关系，把 R1 和 R2 中的每个属性进行扩展，得到对应的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">F_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">F_2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：</p>
<p>对于 F1：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>:</mo><mi>A</mi><mo>→</mo><mi>E</mi><mspace linebreak="newline"></mspace><mi>B</mi><mo>:</mo><mi>B</mi><mo>→</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo>→</mo><mi>E</mi><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><mi>A</mi><mi>C</mi><mo stretchy="false">)</mo><mo>:</mo><mi>A</mi><mi>C</mi><mo>→</mo><mi>B</mi><mo separator="true">,</mo><mi>A</mi><mi>C</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">A:A\rightarrow E\\
B:B\rightarrow A,B\rightarrow E\\
(AC):AC\rightarrow B,AC\rightarrow E
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span></span></p>
<p>对于 F2：需要注意，尽管闭包中有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>→</mo><mi>A</mi><mo separator="true">,</mo><mi>D</mi><mo>→</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">D\rightarrow A,D\rightarrow E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>，但是对应的 A 和 E 属性都不在 R2 本身的集合中，此时这样的函数依赖<strong>不能</strong>加入到 F2 中，因此 R2 对应的 F2 是空集</p>
<p>最后把 F1 和 F2 取并集即可，发现原本 F 中的函数依赖 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>→</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">D\rightarrow A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> 不在 G 中，因此把 D 在 G 中求闭包，发现推不出 A，因此该分解并不能保持函数依赖</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251115164508882.png" alt="image-20251115164508882"></p>
<h2 id="四-sql语句与关系代数"><strong>（四）SQL语句与关系代数</strong></h2>
<blockquote>
<p>使用 SQL 语句和关系代数相关的运算完成数据库操作（主要是查询操作），这部分考的比较难也比较灵活，需要对<code>SQL</code>语句的各种题型有充分的了解</p>
</blockquote>
<h3 id="例1"><strong>例1</strong></h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251208162037498.png" alt="image-20251208162037498"></p>
<p><strong>（1）创建 SLALES 表</strong></p>
<p>要求：该表定义中主要包含语义完整性约束，具体的完整性约束内容根据题意分析决定，各字段类型如下</p>
<ul>
<li>ORDERNO - 20 字符</li>
<li>GNO - 20 字符</li>
<li>RNO - 20 字符</li>
<li>QYT - 整数</li>
<li>SDATE - 日期</li>
<li>SPRICE - 6 位实数，其中小数点后 2 位数字</li>
</ul>
<p>给出对应的建表语句：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> SALES(</span><br><span class="line">	ORDERNO <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">primary key</span>,</span><br><span class="line">    GNO <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span>,</span><br><span class="line">    RNO <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">not null</span>,</span><br><span class="line">    QYT <span class="type">int</span> <span class="keyword">not null</span> <span class="keyword">check</span> (QYT<span class="operator">&gt;</span><span class="number">0</span>),</span><br><span class="line">    SDATE <span class="type">date</span> <span class="keyword">not null</span>,</span><br><span class="line">    SPRICE <span class="type">decimal</span>(<span class="number">6</span>, <span class="number">2</span>) <span class="keyword">not null</span> <span class="keyword">check</span>(SPRICE<span class="operator">&gt;=</span><span class="number">0</span>),  <span class="type">decimal</span>(p,d) <span class="comment">/* 其中 p 是全部数位，d 是小数点后的数位 */</span></span><br><span class="line">    <span class="keyword">foreign key</span>(GNO) <span class="keyword">references</span> GOODS(GNO),</span><br><span class="line">    <span class="keyword">foreign key</span> (RNO) <span class="keyword">references</span> RETAILERS(RNO);</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>我们需要考虑的约束条件大致分为几个方面</p>
<ul>
<li>主键约束：如果是单个属性可以直接在定义后面加上<code>primary key</code>，如果是属性组则单独写成<code>primary key(S1,S2,...)</code></li>
<li>外键约束：直接单独写成<code>foreign key(S1) references Table1(S1)</code>的格式，外键可能有多个</li>
<li>非空的约束：大部分属性都要求非空，直接在定义后面加上<code>not null</code>约束</li>
<li>检查值的约束：部分整型或浮点型数值要求非负或正，直接在定义后面加上<code>check(S1&gt;0)</code>或<code>check(S1&gt;=0)</code>约束</li>
</ul>
<p><strong>（2）检索伊利牌乳制品中，出厂价不高于 50 元的商品编号、商品名称</strong></p>
<p>所有条件都在 GOODS 表中可以找到：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> GNO, GNAME <span class="keyword">from</span> GOODS</span><br><span class="line"><span class="keyword">where</span> BRAND<span class="operator">=</span><span class="string">&#x27;伊利&#x27;</span> <span class="keyword">and</span> CATEGORT<span class="operator">=</span><span class="string">&#x27;乳制品&#x27;</span> <span class="keyword">and</span> FPRICE<span class="operator">&lt;=</span><span class="number">50</span>;</span><br></pre></td></tr></table></figure>
<p><strong>（3）检索产品中既有粮食类商品又有食用油类商品的品牌</strong></p>
<p>解法1：</p>
<p>同一个 BRAND 需要同时拥有<strong>指定的</strong>两个种类，一个实现思路是先做对 CATEGORY 的过滤，筛选掉 CATEGORY 不是目标种类的元组，再做 group 分组，筛选出同时含有两类目标种类的 BRAND</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> BRABD <span class="keyword">from</span> GOODS</span><br><span class="line"><span class="keyword">where</span> CATEGORY <span class="keyword">in</span> (<span class="string">&#x27;粮食&#x27;</span>, <span class="string">&#x27;食用油&#x27;</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> BRAND</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> CATEGORY)<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>上述 SQL 的执行顺序是先做条件筛选，筛选完以后剩下的元组，CATEGORY 列都只是粮食或食用油，再做分组，分组筛选条件是同时拥有这两个种类，也就是去重计数 CATEGORY 恰好为 2 的分组</p>
<p>解法2：</p>
<p>一个更加朴素的做法，我们需要筛选某个品牌 A，这个种类满足：</p>
<ul>
<li>存在一个品牌 B，这个品牌包含<strong>粮食类商品</strong>，且等于品牌 A</li>
<li>存在一个品牌 C，这个品牌包含<strong>食用油类商品</strong>，且等于品牌 A</li>
</ul>
<p>因此我们可以用<code>and</code>两个<code>exists</code>子句作为条件完成上述查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> g1.BRAND <span class="keyword">from</span> GOODS g1</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> GOODS g2</span><br><span class="line">    <span class="keyword">where</span> g2.BRAND <span class="operator">=</span> g1.BRAND <span class="keyword">and</span> g2.CATEGORY<span class="operator">=</span><span class="string">&#x27;粮食&#x27;</span></span><br><span class="line">) <span class="keyword">and</span> <span class="keyword">exists</span> (</span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> GOODS g3</span><br><span class="line">    <span class="keyword">where</span> g3.BRAND<span class="operator">=</span>g1.BRAND <span class="keyword">and</span> g3.CATEGORY<span class="operator">=</span><span class="string">&#x27;食用油&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（4）检索被 10 家（含）以上零售商购买过的商品类别和具体的购买零售商数量</strong></p>
<p>这里的条件是<strong>被&gt;=10个零售商购买</strong>，而统计的目标是针对<strong>每个商品类别</strong>做的计数，因此我们首先想到要分组 + <code>having</code>子句筛选，涉及到的属性有商品类别，零售商数量，二者分别来自 GOODS 和 SALES 表，需要连表查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> CATEGORY, <span class="built_in">count</span>(<span class="keyword">distinct</span> RNO)</span><br><span class="line"><span class="keyword">from</span> GOODS, SALES</span><br><span class="line"><span class="keyword">where</span> GOODS.GNO <span class="operator">=</span> SLAES.GNO</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> CATEGORY</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> RNO)<span class="operator">&gt;=</span><span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p><strong>（5）检索这样的零售商名称：该零售商只购买生产工厂和自己在同一个城市的商品</strong></p>
<p>先给出一个错误的想法：把 GOODS，FACTORY，SALES，RETAILERS 四个表做连表查询，然后令<code>r.RCITY = f.FCITY</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> RNAME <span class="keyword">from</span> GOODS g, SALES s, FACTORY f, RETAILERS r </span><br><span class="line"><span class="keyword">where</span> g.FNO <span class="operator">=</span> f.FNO <span class="keyword">and</span> g.GNO <span class="operator">=</span> s.GNO <span class="keyword">and</span> s.RNO <span class="operator">=</span> r.RNO <span class="keyword">and</span> r.RCITY <span class="operator">=</span> f.FCITY;</span><br></pre></td></tr></table></figure>
<p>这个查询查出来的是<strong>买了和自己在同一个城市商品的零售商</strong>，而不是<strong>只买和自己在同一个城市商品的零售商</strong>，相当于我们无形中放宽了检索条件</p>
<p>但这个大思路是对的，我们要找的其实是<strong>存在</strong>和自己在同一个城市的商品，同时<strong>不存在</strong>和自己不在一个城市的商品的零售商，因此我们可以考虑使用一个<code>exists</code>和一个<code>not exists</code>实现：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> RNAME <span class="keyword">from</span> RETAILERS r</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> GOODS g1, SALES s1, FACTORY f1</span><br><span class="line">	<span class="keyword">where</span> f1.FNO<span class="operator">=</span>g1.FNO <span class="keyword">and</span> g1.GNO<span class="operator">=</span>s1.GNO <span class="keyword">and</span> s1.RNO<span class="operator">=</span>r.RNO <span class="keyword">and</span> r.RCITY<span class="operator">=</span>f1.FCITY</span><br><span class="line">) <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> GOODS g2, SALES s2, FACTORY f2</span><br><span class="line">	<span class="keyword">where</span> f2.FNO<span class="operator">=</span>g2.FNO <span class="keyword">and</span> g2.GNO<span class="operator">=</span>s2.GNO <span class="keyword">and</span> s2.RNO<span class="operator">=</span>r.RNO <span class="keyword">and</span> r.RCITY<span class="operator">&lt;&gt;</span>f2.FCITY</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>注意：在 SQL 中不等关系使用<code>&lt;&gt;</code>来表示</p>
<p>另一个实现思路是先根据零售商编号 RNO 进行分组，如果一个零售商所购买的零件产地都和它自己所在地相等，那么必然这些零件产地的最大值和最小值都会和它自己的所在地相等，我们根据<code>max</code>和<code>min</code>聚合实现筛选</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> RNAME <span class="keyword">from</span> RETAILERS r, SALES s, GOODS g, FACTORY f</span><br><span class="line"><span class="keyword">where</span> g.FNO <span class="operator">=</span> f.FNO <span class="keyword">and</span> g.GNO <span class="operator">=</span> s.GNO <span class="keyword">and</span> s.RNO <span class="operator">=</span> r.RNO </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> RNO, RNAME, RCITY</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">max</span>(FCITY)<span class="operator">=</span>RCITY <span class="keyword">and</span> <span class="built_in">min</span>(FCITY)<span class="operator">=</span>RCITY;</span><br></pre></td></tr></table></figure>
<p>【注意】这里分组的时候之所以要同时用<code>RNO, RNAME, RCITY</code>是因为分组检索规定，当有<code>group by</code>的时候，所有出现在<code>having</code>和<code>select</code>中的子句，如果是<strong>非聚合列</strong>，都必须在<code>group by</code>中作为分组依据</p>
<p><strong>（6）创建北京地区商品销售视图 SALES_BEIJING（属性与 SALES 相同）</strong></p>
<p>创建视图，这里需要一个简单的连表，因为我们需要的属性列来自 SALES 表，但是筛选条件来自 RETAILERS 表，需要对这两个表做连表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> SALES_BEIJING <span class="keyword">as</span> </span><br><span class="line">	<span class="keyword">select</span> s.ORDERNO, s.GNO, s.RNO, s.QTY, s.SDATE, s.SPRICE <span class="keyword">from</span> SALES s, RETAILERS r </span><br><span class="line">    	<span class="keyword">where</span> s.RNO<span class="operator">=</span>r.RNO <span class="keyword">and</span> RCITY<span class="operator">=</span><span class="string">&#x27;北京&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>（7）在视图 SALES_BEIJING 中查询：至少购买 005 号零售商所购买所有商品的零售商编号</strong></p>
<p>这是一类典型的<strong>包含问题</strong>，要求查询<strong>至少包含</strong>某个对象的某个属性集合的对象，我们使用双重否定的方式来做，即连用两个<code>not exists</code>即可完成本例</p>
<p>等价于筛选这样的零售商编号，<strong>不存在</strong>一件商品，使得 005 号零售商购买了它，同时<strong>不存在</strong>当前这个零售商购买这件商品</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> RNO <span class="keyword">from</span> SALES_BEIJING S <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SALES_BEIJING S1 <span class="keyword">where</span> 			</span><br><span class="line">    	S1.RNO<span class="operator">=</span><span class="string">&#x27;005&#x27;</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">    		<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SALES_BEIJING S2 <span class="keyword">where</span></span><br><span class="line">        		S2.GNO<span class="operator">=</span>S1.GNO <span class="keyword">and</span> S2.RNO<span class="operator">=</span>S.RNO </span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（8）删除 2021 年度的商品销售信息</strong></p>
<p>本例的关键是怎么确定日期范围，2021 年包括<code>2021-01-01</code>到<code>20222-01-01</code>之间的所有日期，因此可以直接对日期<code>date</code>做比较运算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> SALES <span class="keyword">where</span></span><br><span class="line">	SDATE <span class="operator">&gt;=</span> <span class="string">&#x27;2021-01-01&#x27;</span> <span class="keyword">and</span> SALES <span class="operator">&lt;</span> <span class="string">&#x27;2022-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>还是针对上面的四个关系，用关系代数完成以下查询</p>
<p><strong>（1）检索北京零售商所购买商品的详细信息</strong></p>
<p>商品的详细信息在 GOODS 表中，表示北京零售商的有关信息在 RETAILERS 表中，二者没法直接连接，需要借助 SALES 表做连接，具体操作为：</p>
<ul>
<li>先在 RETAILERS 表中做<strong>北京地区</strong>的筛选</li>
<li>再把 RETALIERS，SLAES，GOODS 三个表做自然连接</li>
<li>最后投影出 GOODS 中有关商品详细信息的字段</li>
</ul>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>G</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>C</mi><mi>A</mi><mi>T</mi><mi>E</mi><mi>G</mi><mi>O</mi><mi>R</mi><mi>Y</mi><mo separator="true">,</mo><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi><mo separator="true">,</mo><mi>F</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>F</mi><mi>P</mi><mi>R</mi><mi>I</mi><mi>C</mi><mi>E</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>δ</mi><mrow><mi>R</mi><mi>C</mi><mi>I</mi><mi>T</mi><mi>Y</mi><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext>北</mtext><msup><mtext>京</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo stretchy="false">(</mo><mtext>RETAILERS</mtext><mo stretchy="false">)</mo><mo>⋈</mo><mtext>SLAES</mtext><mo>⋈</mo><mtext>GOODS</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{GNO,GNAME,CATEGORY,BRAND,FNO,FPRICE}(\delta_{RCITY=&#x27;北京&#x27;}(\text{RETAILERS})\bowtie \text{SLAES}\bowtie\text{GOODS})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span><span class="mrel mtight"><span class="mrel mtight">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback mtight">北</span><span class="mord mtight"><span class="mord cjk_fallback mtight">京</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">RETAILERS</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68833em;vertical-align:-0.005em;"></span><span class="mord text"><span class="mord">SLAES</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">GOODS</span></span><span class="mclose">)</span></span></span></span></span></p>
<p>这里我们给出的是自然连接，当然也可以用显式的条件连接，即对<code>SALES</code>和<code>GOODS</code>表用<code>GNO</code>字段连接，对<code>RETALIERS</code>和<code>SALES</code>用<code>RNO</code>字段连接</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>G</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>C</mi><mi>A</mi><mi>T</mi><mi>E</mi><mi>G</mi><mi>O</mi><mi>R</mi><mi>Y</mi><mo separator="true">,</mo><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi><mo separator="true">,</mo><mi>F</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>F</mi><mi>P</mi><mi>R</mi><mi>I</mi><mi>C</mi><mi>E</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>δ</mi><mrow><mi>R</mi><mi>C</mi><mi>I</mi><mi>T</mi><mi>Y</mi><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext>北</mtext><msup><mtext>京</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo stretchy="false">(</mo><mtext>RETAILERS</mtext><mo stretchy="false">)</mo><msub><mo>⋈</mo><mrow><mi>R</mi><mi>E</mi><mi>T</mi><mi>A</mi><mi>I</mi><mi>L</mi><mi>E</mi><mi>R</mi><mi>S</mi><mi mathvariant="normal">.</mi><mi>R</mi><mi>N</mi><mi>O</mi><mo>=</mo><mi>S</mi><mi>A</mi><mi>L</mi><mi>E</mi><mi>S</mi><mi mathvariant="normal">.</mi><mi>R</mi><mi>N</mi><mi>O</mi></mrow></msub><mtext>SLAES</mtext><msub><mo>⋈</mo><mrow><mi>S</mi><mi>A</mi><mi>L</mi><mi>E</mi><mi>S</mi><mi mathvariant="normal">.</mi><mi>G</mi><mi>N</mi><mi>O</mi><mo>=</mo><mi>G</mi><mi>O</mi><mi>O</mi><mi>D</mi><mi>S</mi><mi mathvariant="normal">.</mi><mi>G</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>GOODS</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{GNO,GNAME,CATEGORY,BRAND,FNO,FPRICE}(\delta_{RCITY=&#x27;北京&#x27;}(\text{RETAILERS})\bowtie_{RETAILERS.RNO=SALES.RNO} \text{SLAES}\bowtie_{SALES.GNO=GOODS.GNO}(\text{GOODS})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">F</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.07153em;">C</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.22222em;">Y</span><span class="mrel mtight"><span class="mrel mtight">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback mtight">北</span><span class="mord mtight"><span class="mord cjk_fallback mtight">京</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">RETAILERS</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.07847em;">I</span><span class="mord mathdefault mtight">L</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">.</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight">L</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">.</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord text"><span class="mord">SLAES</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight">L</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">.</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mrel mtight">=</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">.</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord text"><span class="mord">GOODS</span></span><span class="mclose">)</span></span></span></span></span></p>
<p><strong>（2）检索购买了伊利牌所有品种商品的零售商编号和零售商名称</strong></p>
<p>本例又是检索包含全部…的某个对象，涉及这种包含问题的求解时，我们通常考虑使用<strong>除法</strong>解决，具体步骤为：</p>
<ul>
<li>先求出伊利牌的所有商品名集合 A</li>
<li>接着先做连表 + 投影出所有的零售商编号，零售商名称，商品名集合 B</li>
<li>最后使用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>÷</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">B÷A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>，最后再投影出 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">RNO,RNAME</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span> 列即可</li>
</ul>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi></mrow></msub><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mtext>RETAILERS</mtext><mo>⋈</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>SALES</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>δ</mi><mrow><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext>伊</mtext><msup><mtext>利</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>GOOD</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{RNO,RNAME}((\text{RETAILERS}\bowtie\pi_{GNO,RNO}(\text{SALES}))÷\delta_{BRAND=&#x27;伊利&#x27;}(\pi_{GNO}(\text{GOOD})))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord text"><span class="mord">RETAILERS</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">SALES</span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mrel mtight"><span class="mrel mtight">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback mtight">伊</span><span class="mord mtight"><span class="mord cjk_fallback mtight">利</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">GOOD</span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p>
<p>这里我们也可以选择先对<code>RETAILERS</code>做投影，只取<code>GNO,RNO</code>两列，最后就不需要做投影了</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>R</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>RETAILERS</mtext><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>SALES</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>δ</mi><mrow><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext>伊</mtext><msup><mtext>利</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>GOOD</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\pi_{RNAME,RNO}(\text{RETAILERS})\bowtie\pi_{GNO,RNO}(\text{SALES}))÷\delta_{BRAND=&#x27;伊利&#x27;}(\pi_{GNO}(\text{GOOD}))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">RETAILERS</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">SALES</span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span><span class="mrel mtight"><span class="mrel mtight">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback mtight">伊</span><span class="mord mtight"><span class="mord cjk_fallback mtight">利</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">GOOD</span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p>
<p><strong>（3）检索到目前为止还没有零售商购买的商品编号、商品名称和商品品牌</strong></p>
<p>这也是一类典型的题目，要求我们检索<strong>没人选 / 没用过</strong>的对象，我们考虑用全部对象减去<strong>有人选 / 用过</strong>的对象，因为后者往往是以某个表的形式存在的（交互记录）：</p>
<ul>
<li>先在 SALES 表中找到所有<strong>有零售商购买</strong>的商品编号</li>
<li>接着和 GOODS 做连表，得到商品名称和品牌</li>
<li>最后用 GOODS 中全部的商品集合与之作差集即可</li>
</ul>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>G</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi></mrow></msub><mo stretchy="false">(</mo><mi>G</mi><mi>O</mi><mi>O</mi><mi>D</mi><mi>S</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>G</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>B</mi><mi>R</mi><mi>A</mi><mi>N</mi><mi>D</mi></mrow></msub><mo stretchy="false">(</mo><mtext>GOODS</mtext><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>π</mi><mrow><mi>G</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>SALES</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{GNO,GNAME,BRAND}(GOODS)-(\pi_{GNO,GNAME,BRAND}(\text{GOODS})\bowtie\pi_{GNO}(\text{SALES}))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.00773em;">R</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">GOODS</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">G</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">SALES</span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p>
<p>还是针对上面的四个关系，用关系演算完成以下查询</p>
<p><strong>检索总金额大于 1 万元的销售单号以及所销售商品的商品编号和商品名称</strong></p>
<p>元组关系演算遵循以下几个原则：</p>
<ul>
<li>表示元组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi></mrow><annotation encoding="application/x-tex">u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">u</span></span></span></span> 在某个表中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> 存在可以用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">u</span><span class="mclose">)</span></span></span></span></li>
<li>取元组的某一列可以直接按下标索引，下标从 1 开始，比如对于关系 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>O</mi><mi>R</mi><mi>D</mi><mi>E</mi><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mo>…</mo><mtext> </mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(ORDERNO,GNO,RNO,\dots)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mclose">)</span></span></span></span>，如果有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>u</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(u)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault">u</span><span class="mclose">)</span></span></span></span>，则有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mi>O</mi><mi>R</mi><mi>D</mi><mi>E</mi><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mtext>  </mtext><mi>u</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mtext>  </mtext><mi>u</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>−</mo><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mo>…</mo></mrow><annotation encoding="application/x-tex">u[1]=ORDERNO,\;u[2]=GNO,\;u[3]-RNO,\dots</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">u</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">u</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">u</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span></span></span></span></li>
<li>我们筛选的结果以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>t</mi><mrow><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">t^{(n)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8879999999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">n</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> 来表示，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span> 为目标属性的个数，比如对于本例，则有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mo>=</mo><mi>O</mi><mi>R</mi><mi>D</mi><mi>E</mi><mi>R</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mtext>  </mtext><mi>t</mi><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mo>=</mo><mi>G</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mtext>  </mtext><mi>t</mi><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo>=</mo><mi>G</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">t[1]=ORDERNO,\;t[2]=GNO,\;t[3]=GNAME</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord">1</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord mathdefault">t</span><span class="mopen">[</span><span class="mord">3</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span></li>
</ul>
<p class="katex-block katex-error" title="ParseError: KaTeX parse error: Undefined control sequence: \and at position 42: …\exists v)(G(u)\̲a̲n̲d̲ ̲S(v)\and u[1]=v…">\{t^{(3)}\;|\;(\exists u)(\exists v)(G(u)\and S(v)\and u[1]=v[2]\and v[4]×v[6]\ge 10000\and t[1]=v[1]\and t[2]=u[1]\and t[3]=u[2])\}
</p>
<h3 id="例2"><strong>例2</strong></h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251208212439258.png" alt="image-20251208212439258"></p>
<p><strong>（1）创建 BORROW 表</strong></p>
<p>创建 BORROW 表，要求 SNO 为字符型 7 个，BNO 为字符型 17 个，BDATE 为日期型</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> BORROW (</span><br><span class="line">	SNO <span class="type">varchar</span>(<span class="number">7</span>) <span class="keyword">not null</span>,</span><br><span class="line">    BNO <span class="type">varchar</span>(<span class="number">17</span>) <span class="keyword">not null</span>,</span><br><span class="line">    BDATE <span class="type">date</span> <span class="keyword">not null</span>,</span><br><span class="line">    <span class="keyword">primary key</span>(SNO, BNO),</span><br><span class="line">    froeign key (SNO) <span class="keyword">references</span> S(SNO),</span><br><span class="line">    <span class="keyword">foreign key</span>(BNO) <span class="keyword">references</span> BOOK(BNO)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（2）查询既借阅了《数据库系统实现》又借阅了《操作系统原理》的同学学号姓名</strong></p>
<p>本例和上一例中检索既有粮食类又有食用油类的商品原理相同</p>
<ul>
<li>使用分组检索实现</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.SNO, SN <span class="keyword">from</span> S, BOOK, BORROW</span><br><span class="line">	<span class="keyword">where</span> S.SNO<span class="operator">=</span>BORROW.SNO <span class="keyword">and</span> 						</span><br><span class="line">	BOOK.BNO<span class="operator">=</span>BORROW.BNO <span class="keyword">and</span> BNAME <span class="keyword">in</span> (<span class="string">&#x27;数据库系统实现&#x27;</span>, <span class="string">&#x27;操作系统原理&#x27;</span>) </span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span> S.SNO, SN <span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> BNAME)<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用两个<code>exixts</code>实现</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.SNO, SN <span class="keyword">from</span> S, BOOK, BORROW</span><br><span class="line">	<span class="keyword">where</span> S.SNO<span class="operator">=</span>BORROW.SNO <span class="keyword">and</span> BOOK.BNO<span class="operator">=</span>BORROW.BNO <span class="keyword">and</span> <span class="keyword">exists</span> (</span><br><span class="line">    	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> BORROW br1, BOOK b1 </span><br><span class="line">        	<span class="keyword">where</span> br1.BNO<span class="operator">=</span>b1.BNO <span class="keyword">and</span> br1.SNO <span class="operator">=</span> S.SNO <span class="keyword">and</span> b1.BNAME<span class="operator">=</span><span class="string">&#x27;数据库系统实现&#x27;</span></span><br><span class="line">    ) <span class="keyword">and</span> <span class="keyword">exists</span> (</span><br><span class="line">        <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> BORROW br2, BOOK b2 </span><br><span class="line">        	<span class="keyword">where</span> br2.BNO<span class="operator">=</span>b2.BNO <span class="keyword">and</span> br2.SNO <span class="operator">=</span> S.SNO <span class="keyword">and</span> b2.BNAME<span class="operator">=</span><span class="string">&#x27;操作系统原理&#x27;</span></span><br><span class="line">    );</span><br></pre></td></tr></table></figure>
<p><strong>（3）查询每个同学都借阅过的书的书名</strong></p>
<p>这是典型的分组查询，我们考虑，如果每个同学都借阅过，则如果对每本书按照编号分组，那么得到的<strong>去重后</strong>借阅同学的数量应当和同学总数相同，而同学总数可以由 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span> 表快速得到</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> BNAME <span class="keyword">from</span> BOOK, BORROW</span><br><span class="line"><span class="keyword">where</span> BOOK.BNO<span class="operator">=</span>BORROW.BNO</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> BNO, BNAME</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> SNO)<span class="operator">=</span>(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> S);</span><br></pre></td></tr></table></figure>
<p>这里我们把同学总数作为一个子查询的结果返回，用于作为筛选条件，同时从语法层面而言，<code>BNO</code>这个字段不应该写入<code>group by</code>条件中，这里加上主要是从语义层面限制，防止有两本书书名相同的情况出现</p>
<p>此外，本例也可以通过<strong>双重否定</strong>的方式实现，每个同学都查过，也隐含一种任意的含义，等价为查找一本书，不存在这样的同学，使得它不存在借过这本书的记录，这也是一个很自然的实现思路</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> b.BNAME <span class="keyword">from</span> BOOK b</span><br><span class="line">	<span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(</span><br><span class="line">		<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> S s </span><br><span class="line">        	<span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">            	<span class="keyword">select</span> BNO <span class="keyword">from</span> BORROW br</span><br><span class="line">                	<span class="keyword">where</span> br.SNO<span class="operator">=</span>s.SNO <span class="keyword">and</span> br.BNO<span class="operator">=</span>b.BNO</span><br><span class="line">            )</span><br><span class="line">); </span><br></pre></td></tr></table></figure>
<p><strong>（4）创建计算机系视图</strong></p>
<p>直接创建视图即可，要求包含：学号、姓名、书号、书名、借阅日期，注意需要加上筛选条件<code>'计算机系'</code></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> 计算机系 <span class="keyword">as</span></span><br><span class="line">	<span class="keyword">select</span> s.SNO, s.SN, b.BNO, b.BNAME, br.BDTE</span><br><span class="line">		<span class="keyword">from</span> S s, BOOK b, BR br</span><br><span class="line">			<span class="keyword">where</span> s.SNO<span class="operator">=</span>br.SNO <span class="keyword">and</span> b.BNO<span class="operator">=</span>br.BNO <span class="keyword">and</span> s.SD<span class="operator">=</span><span class="string">&#x27;计算机系&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>（5）利用计算机系视图查询：借阅过《高等数学》<strong>次数最多</strong>的学生学号姓名</strong></p>
<p>这里我们需要构建子查询，先查询出借阅高等数学最多的同学<strong>借书多少次</strong>，再把这个子查询的结果作为比较条件进行筛选</p>
<ul>
<li>构造子查询如下（这里不需要对<code>sno</code>去重求和，因为我们求的就是一个学生可能借高等数学多次）</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(SNO) <span class="keyword">from</span> v4</span><br><span class="line">	<span class="keyword">where</span> BNAME<span class="operator">=</span><span class="string">&#x27;高等数学&#x27;</span></span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span> SNO;</span><br></pre></td></tr></table></figure>
<ul>
<li>主查询</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, SNAME <span class="keyword">from</span> v4</span><br><span class="line">	<span class="keyword">group</span> <span class="keyword">by</span> SNO, SNAME, BNAME <span class="keyword">having</span> BNAME<span class="operator">=</span><span class="string">&#x27;高等数学&#x27;</span> <span class="keyword">and</span> <span class="built_in">count</span>(SNO)<span class="operator">&gt;=</span><span class="keyword">all</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">count</span>(SNO) <span class="keyword">from</span> v4</span><br><span class="line">        <span class="keyword">where</span> BNAME<span class="operator">=</span><span class="string">&#x27;高等数学&#x27;</span></span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> SNO;</span><br><span class="line">    ); </span><br></pre></td></tr></table></figure>
<p>也可以用<code>max</code>聚集函数完成查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> SNO, SN</span><br><span class="line"><span class="keyword">FROM</span> 计算机系</span><br><span class="line"><span class="keyword">WHERE</span> BNAME <span class="operator">=</span> <span class="string">&#x27;高等数学&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> SNO, SN</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">MAX</span>(cnt)</span><br><span class="line">    <span class="keyword">FROM</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> SNO, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> cnt</span><br><span class="line">        <span class="keyword">FROM</span> 计算机系</span><br><span class="line">        <span class="keyword">WHERE</span> BNAME <span class="operator">=</span> <span class="string">&#x27;高等数学&#x27;</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> SNO</span><br><span class="line">    ) </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这里<code>select count(*) as cnt</code>相当于给<code>count(*)</code>起一个别名<code>cnt</code>，使其可以作为表的一列供后续查询使用，本例相当于使用了两层子查询，外层是<code>select max(cnt)</code>，内层是<code>select SNO, count(*) as cnt</code></p>
<p><strong>（6）查询“计算机系”年龄 20~22 的姓王的同学的学号姓名</strong></p>
<p>本例的核心考点是字符串的部分匹配，即<code>王姓</code>查找的实现，可以使用<code>String like fmt</code>来实现字符串的部分匹配，其中<code>String</code>是待匹配的列<code>fmt</code>有两种格式：</p>
<ul>
<li><code>S%</code>：表示以 S 开头，后接0个或任意多个任意字符</li>
<li><code>S_</code>：表示以 S 开头，后接 1 个任意字符</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO, SN <span class="keyword">from</span> S <span class="keyword">where</span></span><br><span class="line">	SD<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span> <span class="keyword">and</span> SA<span class="operator">&gt;=</span><span class="number">20</span> <span class="keyword">and</span> SA<span class="operator">&lt;=</span><span class="number">22</span> <span class="keyword">and</span> SN <span class="keyword">like</span> <span class="string">&#x27;王%&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p><strong>关系代数</strong></p>
<p>还是针对上表，用关系代数解决下面的查询</p>
<p><strong>（1）查询借阅了“李明”借阅过的</strong>所有书<strong>的同学学号</strong></p>
<p>即查询包含李明借过的所有书的同学的学号，对于<strong>包含关系</strong>的解决，显然可以用<strong>除法</strong>实现：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>B</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>BORROW</mtext><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>π</mi><mrow><mi>B</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>δ</mi><mrow><mi>S</mi><mi>N</mi><msup><mo>=</mo><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mtext>李</mtext><msup><mtext>明</mtext><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow></msub><mo stretchy="false">(</mo><msub><mi>π</mi><mrow><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>S</mi><mi>N</mi></mrow></msub><mo stretchy="false">(</mo><mtext>S</mtext><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>π</mi><mrow><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>B</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>BORROW</mtext><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{SNO,BNO}(\text{BORROW})÷\pi_{BNO}(\delta_{SN=&#x27;李明&#x27;}(\pi_{SNO,SN}(\text{S})\bowtie\pi_{SNO,BNO}(\text{BORROW})))
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">BORROW</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mrel mtight"><span class="mrel mtight">=</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mord cjk_fallback mtight">李</span><span class="mord mtight"><span class="mord cjk_fallback mtight">明</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">S</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05764em;">S</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">BORROW</span></span><span class="mclose">)</span><span class="mclose">)</span><span class="mclose">)</span></span></span></span></span></p>
<p><strong>（2）查询借阅过“线性代数”但</strong>没借阅过**“离散数学”的同学学号姓名**</p>
<p>显然使用差集即可，先求出 A 集合表示借阅线性代数的同学，B 集合表示借阅离散数学的同学，直接令二者作差即可</p>
<p><strong>（3）查询借阅过《编译原理》同学的学号姓名</strong></p>
<p class="katex-block katex-error" title="ParseError: KaTeX parse error: Undefined control sequence: \and at position 60: … w)(\text{S}(u)\̲a̲n̲d̲ ̲\text{BOOK}(v)\…">\{t^{(2)}\;|\;(\exists u)(\exists v)(\exists w)(\text{S}(u)\and \text{BOOK}(v)\and \text{BORROW}(w)\and u[1]=w[1]\and v[1]=w[2]\and v[2]=&#039;编译原理&#039;\and t[1]=u[1]\and t[2]=u[2])\}
</p>
<h3 id="例3"><strong>例3</strong></h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251211202752630.png" alt="image-20251211202752630"></p>
<p><strong>（1）检索和产品号为 01 的产品放在一个仓库的产品的产品名称</strong></p>
<p>本例是典型的 “检索和李四年龄相同的同学” 类的题目，我们有三种实现方式，其中<code>in</code>的实现是最简单的</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* exists */</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> WNAME <span class="keyword">from</span> W, WP WP1 <span class="keyword">where</span> W.WNO<span class="operator">=</span>WP1.WNO <span class="keyword">and</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> WP WP2 <span class="keyword">where</span> WP2.WNO<span class="operator">=</span>WP1.WNO <span class="keyword">and</span> WP2.PSNO<span class="operator">=</span><span class="string">&#x27;01&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 自身连表 */</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> WNAME <span class="keyword">from</span> W, WP WP1, WP WP2 <span class="keyword">where</span></span><br><span class="line">	W.WNO<span class="operator">=</span>WP1.WNO <span class="keyword">and</span> WP1.WNO<span class="operator">=</span>WP2.WNO <span class="keyword">and</span> WP2.PSNO<span class="operator">=</span><span class="string">&#x27;01&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* in */</span></span><br><span class="line"><span class="keyword">select</span> WNAME <span class="keyword">from</span> W <span class="keyword">where</span> WNO <span class="keyword">in</span> (</span><br><span class="line">	<span class="keyword">select</span> WNO <span class="keyword">from</span> WP <span class="keyword">where</span> PSNO<span class="operator">=</span><span class="string">&#x27;01&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（2）定义视图 PWVIEW，包含仓库号，产品型号，以及该产品型号在每个仓库中存放记录的数量</strong></p>
<p>根据最后一条要求，显然要分组查询，按照产品型号和仓库号两个关键字进行分组，其中最后一列是原本不存在的列，因此我们需要在视图中显式的指出列名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> PWVIEW(WNO, PTNO, QYT)</span><br><span class="line"><span class="keyword">as</span> <span class="keyword">select</span> WNO, PTNO, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> WP, P <span class="keyword">where</span></span><br><span class="line">	WP.WNO<span class="operator">=</span>P.WNO</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> WP.WNO, P.PTNO</span><br></pre></td></tr></table></figure>
<p><strong>（3）检索海淀区的仓库都存放的产品的产品型号</strong></p>
<p>本例的原理类似于 “检索包含刘晨所选的课的同学的学号” 类问题，使用两个<code>not exists</code>子句实现，即检索某个产品，使得不存在这样的记录，这个记录的仓库地区是海淀，且这个仓库不存在存储当前的产品型号</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> PTNO <span class="keyword">from</span> P <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> W <span class="keyword">where</span> WADDRESS <span class="keyword">like</span> <span class="string">&#x27;%海淀%&#x27;</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">    	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> WP <span class="keyword">where</span> WP.WNO<span class="operator">=</span>W.WNO <span class="keyword">and</span> WP.PSNO<span class="operator">=</span>P.PSNO </span><br><span class="line">    )</span><br><span class="line">);	</span><br></pre></td></tr></table></figure>
<p><strong>（4）昌平区新建一个仓库，编号为 06，仓库容量 1000，负责人暂时缺省</strong></p>
<p>这里我们添加的元组中，有效信息只有地区，编号，容量，存在大量缺省列，则我们需要<strong>显式</strong>指出非缺省列的列名（否则会默认填写到前三列导致对应错误），缺省列默认即为 NULL</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert into</span> W(WNO, WADDRESS, WCAPACITY)</span><br><span class="line"><span class="keyword">values</span>(</span><br><span class="line">	<span class="string">&#x27;06&#x27;</span>, <span class="string">&#x27;Champions&#x27;</span>, <span class="number">1000</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（5）检索存放所有型号的仓库编号和名称</strong></p>
<p>显然是要用 ÷ 来解决，我们可以先从列的角度思考，最后要的是<code>WNO</code>和<code>WNAME</code>，而除以的列是<code>PTNO</code>，则被除的列必然是<code>WNO,WNAME,PTNO</code>，由此我们确定了对应的关系代数表达式：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>W</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>W</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi><mo separator="true">,</mo><mi>P</mi><mi>T</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>WP</mtext><mo>⋈</mo><mtext>P</mtext><mo>⋈</mo><mi>W</mi><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>π</mi><mrow><mi>P</mi><mi>T</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>P</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{WNO,WNAME,PTNO}(\text{WP}\bowtie\text{P}\bowtie W)÷\pi_{PTNO}(\text{P})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">WP</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68833em;vertical-align:-0.005em;"></span><span class="mord text"><span class="mord">P</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">W</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">P</span></span><span class="mclose">)</span></span></span></span></span></p>
<p>这样写已经算对，我们也可以写的更优雅一点，先用<code>WNO,PTNO÷PTNO=WNO</code>，再重新和<code>WNO,WNAME</code>连表得到最终给结果：</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mrow><mi>W</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>P</mi><mi>T</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>WP</mtext><mo>⋈</mo><mtext>P</mtext><mo stretchy="false">)</mo><mo>÷</mo><msub><mi>π</mi><mrow><mi>P</mi><mi>T</mi><mi>N</mi><mi>O</mi></mrow></msub><mo stretchy="false">(</mo><mtext>P</mtext><mo stretchy="false">)</mo><mo>⋈</mo><msub><mi>π</mi><mrow><mi>W</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>W</mi><mi>N</mi><mi>A</mi><mi>M</mi><mi>E</mi></mrow></msub><mo stretchy="false">(</mo><mtext>W</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{WNO,PTNO}(\text{WP}\bowtie\text{P})÷\pi_{PTNO}(\text{P})\bowtie\pi_{WNO,WNAME}(\text{W})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">WP</span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">P</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">P</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">T</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">P</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⋈</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">O</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.13889em;">W</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">N</span><span class="mord mathdefault mtight">A</span><span class="mord mathdefault mtight" style="margin-right:0.10903em;">M</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">W</span></span><span class="mclose">)</span></span></span></span></span></p>
<h3 id="例4"><strong>例4</strong></h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/image-20251211220408898.png" alt="image-20251211220408898"></p>
<p><strong>（1）检索既选修了数据库又选修了操作系统的学生学号</strong></p>
<p>对于这种既…又…类题目，我们先前已经给出了分组检索和使用两个<code>exists</code>的检索方式：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 分组 */</span></span><br><span class="line"><span class="keyword">select</span> SNO <span class="keyword">from</span> SC, C <span class="keyword">where</span></span><br><span class="line">SC.CNO<span class="operator">=</span>C.CNO <span class="keyword">and</span> C.CNAME <span class="keyword">in</span> (<span class="string">&#x27;数据库&#x27;</span>, <span class="string">&#x27;操作系统&#x27;</span>)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> SNO <span class="keyword">having</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> CNAME)<span class="operator">=</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* exists */</span></span><br><span class="line"><span class="keyword">select</span> SNO <span class="keyword">from</span> S <span class="keyword">where</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC SC1, C C1 <span class="keyword">where</span></span><br><span class="line">    	S.SNO<span class="operator">=</span>SC1.SNO <span class="keyword">and</span> SC1.CNO<span class="operator">=</span>C1.CNO <span class="keyword">and</span> C1.CNAME<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span></span><br><span class="line">) <span class="keyword">and</span> <span class="keyword">exists</span> (</span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC SC2, C C2 <span class="keyword">where</span></span><br><span class="line">    	S.SNO<span class="operator">=</span>SC2.SNO <span class="keyword">and</span> SC2.CNO<span class="operator">=</span>C2.CNO <span class="keyword">and</span> C2.CNAME<span class="operator">=</span><span class="string">&#x27;操作系统&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>下面我们给出一种用<code>in</code>实现的检索方式，即先检索选修了其中一门课的学号，再判断这个学号在选修了另一门课的学号集合中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNO <span class="keyword">from</span> SC, C <span class="keyword">where</span></span><br><span class="line">SC.CNO<span class="operator">=</span>C.CNO <span class="keyword">and</span> C.CNAME<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span> <span class="keyword">and</span> SC.SNO <span class="keyword">in</span> (</span><br><span class="line">	<span class="keyword">select</span> SNO <span class="keyword">from</span> SC SC1, C C1 <span class="keyword">where</span></span><br><span class="line">	SC1.CNO<span class="operator">=</span>C1.CNO <span class="keyword">and</span> C1.CNAME<span class="operator">=</span><span class="string">&#x27;操作系统&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>（2）检索年龄比李明小三岁的同学的姓名（这里默认姓名都不重名）</strong></p>
<p>本例考察子查询作为检索条件时，如果查询结果是单值，则可以直接参与比较运算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> SNAME <span class="keyword">from</span> S <span class="keyword">where</span></span><br><span class="line">AGE<span class="operator">=</span>(<span class="keyword">select</span> AGE <span class="keyword">from</span> S S1 <span class="keyword">where</span> S1.SNAME<span class="operator">=</span><span class="string">&#x27;李明&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p><strong>（3）检索每个学生超出自己平均成绩的课程的课号（只有及格的科目才参与平均成绩计算）</strong></p>
<p>本例考察基于派生表的查询，试想如果我们有一个表<code>SNO_AVG(SNO, AVG)</code>用来维护每个学生的学号和平均成绩，则可以直接进行连表查询，因此我们想到分两步来做，先把这个派生表构造出来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> SNO, <span class="built_in">AVG</span>(Grade) <span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> SNO <span class="keyword">having</span> Grade<span class="operator">&gt;=</span><span class="number">60</span>) <span class="keyword">as</span> SNO_AVG(SNO, AVG)</span><br></pre></td></tr></table></figure>
<p>接着我们用这个派生表和<code>SC</code>表连表查询即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> CNO <span class="keyword">from</span> SC, (<span class="keyword">select</span> SNO, <span class="built_in">AVG</span>(Grade) <span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> SNO <span class="keyword">having</span> Grade<span class="operator">&gt;=</span><span class="number">60</span>) <span class="keyword">as</span> SNO_AVG(SNO, AVG)</span><br><span class="line"><span class="keyword">where</span> SC.SNO<span class="operator">=</span>SNO_AVG.SNO <span class="keyword">and</span> SNO_AVG.AVG<span class="operator">&lt;=</span>SC.Grade;</span><br></pre></td></tr></table></figure>
<p><strong>（4）检索书名中包含数据库的具体信息和总销售量</strong></p>
<p>这里存在一本书（对应的书籍信息完全相同）被不同消费者多次购买的情况，因此我们需要按照书籍信息进行分组，在组内对每个消费者的购买量做求和运算，得到的才是中销售量</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> BOOK.BNO, BNAME, AUTHOR, PRESS, <span class="built_in">sum</span>(QTY) <span class="keyword">from</span> BOOK, CUSTOMER, SALE <span class="keyword">where</span></span><br><span class="line"><span class="keyword">where</span> BOOK.BNO <span class="operator">=</span> SALE.BNO <span class="keyword">and</span> CUSTOMER.CNO <span class="operator">=</span> SALE.CNO <span class="keyword">and</span> BNAME <span class="keyword">like</span> <span class="string">&#x27;%数据库%&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> BOOK.BNO, BNAME, AUTHOR, PRESS;</span><br></pre></td></tr></table></figure>
<p><strong>AS 关键字的使用</strong></p>
<p>（1）为聚合查询起别名，比如<code>select count(*) as cnt</code></p>
<p>（2）为查询结果起一个派生表名，比如上面（3）中的应用</p>
<h2 id="五-e-r-图设计"><strong>（五）E-R 图设计</strong></h2>
<blockquote>
<p>送分题，背下来 E-R 图转关系模式的时候几类联系的转化规则即可</p>
</blockquote>
<h3 id="e-r-图向关系模型的转换"><strong>E-R 图向关系模型的转换</strong></h3>
<p>E-R 图由实体型（矩形），实体的类型（椭圆形），实体型之间的联系（菱形）三个要素组成，E-R 图向关系模型的转换就是将实体型，实体的属性和实体型之间的联系转化为关系模式</p>
<p>（1）转换原则：一个实体型转换为一个关系模式，关系的属性为实体的属性，关系的码为实体的码</p>
<p>（2）实体型之间联系的转换</p>
<p>①一个 1:1 联系可以转换为一个独立的关系模式，也可以与任意一端对应的关系模式合并</p>
<ul>
<li>转换为一个独立的关系模式
<ul>
<li>关系的属性：与该联系相连的各实体的码，以及联系本身的属性</li>
<li>关系的候选码：每个实体的码都是该关系的候选码</li>
</ul>
</li>
<li>与某一端实体对应的关系模式合并
<ul>
<li>合并后关系的属性：加入与之有联系的关系（也就是联系另一头的关系）的码和联系本身的属性</li>
<li>合并后关系的码：不变</li>
</ul>
</li>
</ul>
<p>一般对于 1:1 联系，我们都采用与某一端的关系模式合并的方法来处理，这样可以减少系统中关系的个数，尽量避免后续的连表查询</p>
<p>②一个 1:n 联系可以转换为一个独立的关系模式，也可以与 n 端对应的关系模式合并</p>
<ul>
<li>转换为一个独立的关系模式
<ul>
<li>关系的属性：与该联系相连的各实体的码以及联系本身的属性</li>
<li>关系的候选码：n 端实体的码</li>
</ul>
</li>
<li>与 n 端对应的关系模式合并
<ul>
<li>合并后关系的属性：在 n 端关系中加入 1 端关系的码和联系本身的属性</li>
<li>合并后关系的码：不变</li>
</ul>
</li>
</ul>
<p>一般对于 1:n 联系，我们都采用与 n 端关系模式合并的方法来处理，因为这样可以减少系统中关系的个数，尽量避免后续的连表查询</p>
<p>③一个 m:n 联系只能转换为一个独立的关系模式，无法合并到任意一端实体对应的关系模式中</p>
<ul>
<li>关系的属性：与该联系相连的各实体的码以及联系本身的属性</li>
<li>关系的候选码：各实体码的组合</li>
</ul>
<p>示例：对于学生和课程实体之间，联系为选课，我们可以把他转化为以下的关系模式，其中学号和课程号是新关系的组合码</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>选修</mtext><mo stretchy="false">(</mo><mtext>学号</mtext><mo separator="true">,</mo><mtext>课程号</mtext><mo separator="true">,</mo><mtext>成绩</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">选修(学号,课程号,成绩)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord cjk_fallback">选</span><span class="mord cjk_fallback">修</span><span class="mopen">(</span><span class="mord cjk_fallback">学</span><span class="mord cjk_fallback">号</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">课</span><span class="mord cjk_fallback">程</span><span class="mord cjk_fallback">号</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">成</span><span class="mord cjk_fallback">绩</span><span class="mclose">)</span></span></span></span></span></p>
<p>④三个或三个以上实体之间的一个多元联系转换为一个关系模式</p>
<ul>
<li>关系的属性：与该联系相连的各实体的码以及联系本身的属性</li>
<li>关系的候选码：各实体码的组合</li>
</ul>
<h2 id="六-第二轮复习补充内容"><strong>（六）第二轮复习补充内容</strong></h2>
<blockquote>
<p>回首向来萧瑟处，也无风雨也无晴</p>
</blockquote>
<p>（1）四种容易混淆的存取方法：</p>
<ul>
<li>关系的存取方法 / 进行数据库物理设计时可选择的的存取方法：索引方法（Hash 索引，B 树索引，B+ 树索引），聚集方法（也称为聚簇方法），哈希方法</li>
<li>文件中记录的组织方式：堆，顺序，索引，散列，聚集</li>
<li>表 / 文件所占磁盘块的分配方法：连续分配，链接分配，按簇分配，索引分配</li>
<li>数据库中数据文件的组织形式：堆文件，顺序文件，散列文件</li>
</ul>
<p>（2）关系数据语言的特点：一体化，非过程化，面向集合的存取方式（这里的<strong>集合</strong>指的是关系 / 关系中元组的集合），既可以单独使用也可以与主语言嵌套使用</p>
<p>（3）在数据库中，用于描述数据逻辑结构的模型是<strong>关系模式</strong>，用于描述数据概念结构的是 <strong>E-R 图</strong>，前者被称为数据模型，后者被称为信息模型 / 概念模型，关系模式的建立和优化是在数据库设计的<strong>逻辑结构设计</strong>阶段完成的</p>
<p>（4）对于代数优化而言，<strong>选择</strong>和<strong>投影</strong>运算越早做，中间结果的规模越小，一般认为对应的查询效率越高（选择大于一切）</p>
<p>（5）对于参照完整性，参考码所在的表称为从表，被参考码所在的表称为主表，以下操作都有可能破坏参照完整性：</p>
<ul>
<li>在从表中插入</li>
<li>在从表中修改</li>
<li>在主表中修改</li>
</ul>
<p>一定不会破坏参照完整性的操作是：在主表中插入</p>
<p>（6）关系模式中三种数据模型（层次，网状，关系）的主要区别在于<strong>联系的表示方式不同</strong></p>
<p>（7）关系规范化的目的：</p>
<ul>
<li>减少数据冗余，保持数据一致性，完整性，正确性，可用性</li>
<li>减少存储异常，确保存储效率</li>
</ul>
<p>（8）范式等级判断结论：</p>
<ul>
<li>所有属性都是主属性（或者说<strong>码</strong>由全部属性构成），一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，不一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>只有两个属性，一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>C</mi><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">BCNF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>只有一个候选键，一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">2NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span>，不一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
<li>不存在非主属性，一定是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi>N</mi><mi>F</mi></mrow><annotation encoding="application/x-tex">3NF</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span></span></span></span></li>
</ul>
<p>（9）用户级权限和关系级权限的授予和收回：</p>
<ul>
<li>授予用户级权限：<code>Grant Create Session to SCOTT;</code></li>
<li>收回用户级权限：<code>Revoke Create Session from SCOTT</code></li>
<li>授予关系级权限：<code>Grant Select, Update On Student To Liming With Grant Option</code></li>
<li>收回关系级权限：<code>Revoke All On Student From Liming</code></li>
</ul>
<p>二者最显著的区别就是，关系级权限的语句中会指明<code>On</code>哪个<code>Table</code></p>
<p>（10）关系演算安全性问题的解决方法：对关系演算施加安全性限制，只允许存在安全表达式（具体方法可以写限制变量取值范围，或使用等价的关系代数表达式）</p>
<p>（11）查询优化</p>
<ul>
<li>选择操作的优化：全表扫描法，索引扫描法</li>
<li>连接操作的优化：嵌套循环，排序合并，索引连接，Hash Join</li>
<li>排序操作：快速排序法，外排序-归并法</li>
</ul>
<p>（12）E-R 图的结构冲突本质上是同一对象在不同应用中有不同的抽象所造成的</p>
<p>（13）数据库是长期存储在计算机内，有组织，可共享的数据集合（数据库的三个特性：长期性，有组织性，可共享性）</p>
<p>（14）从<strong>数学</strong>角度看，核心的关系运算是并，差，乘，选择，投影；从<strong>数据库</strong>角度看，核心的关系运算是选择，投影，连接</p>
<p>（15）在数据库中造成数据不一致的根本原因是：<strong>数据冗余</strong></p>
<p>（16）数据库恢复机制的<strong>技术</strong>包括数据库转储，日志，<strong>基本思想</strong>是冗余；并发控制机制的<strong>技术</strong>包括封锁，乐观与悲观并发控制方法，多版本并发控制方法，事务隔离级别，<strong>基本思想</strong>是合理调度并发事务</p>
<p>（17）在关系的描述中，如果出现形如每个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> 属性有一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span> 属性，或每个属性 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> 对应一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span> 属性这样的字段，则可以认为存在函数依赖 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A\to B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span></p>
<p>（18）多个事务并发调度的可串行化，指的是并发调度这些事务的执行结果和按照某一次序串行执行他们的结果相同，这样的调度策略称为可串行化调度</p>
<p>（19）<code>Alter Table</code>是数据库定义语言，不是数据库操纵语言，所有和表<strong>结构</strong>本身有关的都是<code>DDL</code>，所有和表<strong>内容</strong>有关的才是<code>DML</code></p>
<ul>
<li><code>DDL</code>：<code>create, alter, drop</code>（创建表格，视图，索引；修改表结构；删除表格，视图，索引）</li>
<li><code>DML</code>：<code>select, insert, delete, update</code>（检索，插入，删除，修改）</li>
<li><code>DCL</code>：和数据库控制有关，包括并发控制，安全性控制，完整性控制，数据库恢复</li>
</ul>
<p>（20）在查询优化中，如果想尽可能做到优化，选择运算的优先级应当高于投影运算，即先做选择，再做投影</p>
<p>（21）已知 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>S</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">S(SNO, SName)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo stretchy="false">(</mo><mi>C</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>C</mi><mi>N</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C(CNO,CName)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault">a</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mclose">)</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>C</mi><mo stretchy="false">(</mo><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>C</mi><mi>N</mi><mi>O</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">SC(SNO,CNO)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mclose">)</span></span></span></span>，向 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">SC</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span> 中插入新元组时的语义约束：</p>
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>C</mi><mi>N</mi><mi>O</mi></mrow><annotation encoding="application/x-tex">SNO, CNO</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span></span></span></span> 不能为空或部分为空，需要满足实体完整性</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>N</mi><mi>O</mi><mo separator="true">,</mo><mi>C</mi><mi>N</mi><mi>O</mi></mrow><annotation encoding="application/x-tex">SNO,CNO</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault" style="margin-right:0.10903em;">N</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span></span></span></span> 必须分别在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo separator="true">,</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">S,C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span> 表中有对应的值，需要满足参照完整性</li>
</ul>
<p>（22）事务处理技术的作用：保证事务的 ACID 特性成立，从而保证数据库的一致性和正确性</p>
<p>（23）查询优化的目标：选择一个高效执行的查询处理策略，使得查询代价最小，访问磁盘的块数最少</p>
<ul>
<li>查询计划：定义了每个操作的算法以及操作的执行顺序</li>
</ul>
<p>（24）数据库系统的组成：数据库，用户，硬件，软件</p>
<p>（25）DBMS 的组成：语言编译处理程序，系统运行控制程序，系统建立和维护程序，数据字典</p>
<p>（26）数据字典：称为数据目录或系统目录，由一系列表组成，存储数据库中有关信息的当前描述，包括数据库的三级模式，用户名表，用户权限等信息</p>
<p>（27）关系数据语言<code>SQL</code>功能分类：</p>
<ul>
<li>数据查询：<code>Select</code></li>
<li>数据定义：<code>Create, Drop, Alter</code></li>
<li>数据操纵：<code>Insert, Update, Delete</code></li>
<li>数据控制：<code>Grant, Revoke</code></li>
</ul>
<p>（28）关系模型的优化：水平分解和垂直分解</p>
<p>（29）DBMS 管理存储的目标：最小化磁盘和主存之间传输存储块的数量，即最小化磁盘存取次数</p>
<p>（30）缓冲区管理器（Buffer Manager）的主要功能是：在主存中管理数据库缓冲区，负责磁盘页与内存页之间的数据交换，通过合理的页面替换策略和预取策略，减少磁盘 I/O 次数，提高数据访问效率</p>
<p>（31）代数优化的一般准则：</p>
<ul>
<li>选择尽早做（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">σ</span></span></span></span> 下推）</li>
<li>投影尽早做（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span> 下推）</li>
<li>消除笛卡尔积</li>
<li>连接顺序先小后大</li>
<li>尽量推迟昂贵操作</li>
</ul>
<p>（32）查询树优化的思想：通过等价变换，使得中间结果尽可能小，从而减少 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>I</mi><mi mathvariant="normal">/</mi><mi>O</mi></mrow><annotation encoding="application/x-tex">I/O</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span></span></span></span> 和计算代价，包括选择下推，投影下推，连接顺序优化，笛卡尔积转化为连接四个核心</p>
<hr>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/picture.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/picture.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Destiny</div><div class="post-copyright__author_desc">跋涉浮尘烛光灭</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/')">(SQL11)数据库例题选讲</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" rel="external nofollow noreferrer" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=(SQL11)数据库例题选讲&amp;url=https://agilawood4.github.io/2025/11/15/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BE%8B%E9%A2%98%E9%80%89%E8%AE%B2/&amp;pic=/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2141.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://agilawood4.github.io" target="_blank">Destiny's Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>专业课<span class="tagsPageCount">33</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2151.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/11/14/%EF%BC%88%E7%BC%96%E8%AF%9110%EF%BC%89%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90-%E9%AB%98%E7%BA%A7%E7%AF%87/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2152.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">(编译10)词法分析高级篇</div></div></a></div><div class="next-post pull-right"><a href="/2025/11/15/%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2115.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据库设计</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/12/04/(SQL)%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E6%8A%80%E6%9C%AF/" title="(SQL9)事务处理技术"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2139.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-04</div><div class="title">(SQL9)事务处理技术</div></div></a></div><div><a href="/2026/01/17/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86%EF%BC%88%E5%AE%8C%E6%95%B4%E7%89%88%EF%BC%89/" title="(SQL12)数据库知识点整理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2142.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2026-01-17</div><div class="title">(SQL12)数据库知识点整理</div></div></a></div><div><a href="/2025/11/16/(SQL3)SQL%E8%AF%AD%E5%8F%A5%E8%A1%A5%E5%85%85/" title="(SQL3)SQL语句补充"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2132.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-11-16</div><div class="title">(SQL3)SQL语句补充</div></div></a></div><div><a href="/2025/12/06/(SQL)%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0/" title="(SQL10)数据库复习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2140.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-06</div><div class="title">(SQL10)数据库复习</div></div></a></div><div><a href="/2025/09/25/(SQL3)SQL%E8%AF%AD%E5%8F%A5%E8%AF%BE%E4%B8%8A/" title="(SQL3)SQL语句课上"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2133.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-09-25</div><div class="title">(SQL3)SQL语句课上</div></div></a></div><div><a href="/2026/01/17/(SQL1)%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%AE%BA/" title="(SQL1)数据库概论"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2130.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2026-01-17</div><div class="title">(SQL1)数据库概论</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/picture.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">数据库往年题知识点整理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%A1%AB%E7%A9%BA-%E9%80%89%E6%8B%A9%E9%A2%98"><span class="toc-number">1.1.</span> <span class="toc-text">（一）填空+选择题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%AE%80%E7%AD%94%E9%A2%98"><span class="toc-number">1.2.</span> <span class="toc-text">（二）简答题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E8%8C%83%E5%BC%8F%E9%A2%98"><span class="toc-number">1.3.</span> <span class="toc-text">（三）范式题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%82%E9%97%AD%E5%8C%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">求闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%82%E5%80%99%E9%80%89%E7%A0%81"><span class="toc-number">1.3.2.</span> <span class="toc-text">求候选码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B1%82%E6%9C%80%E5%B0%8F%E4%BE%9D%E8%B5%96%E9%9B%86"><span class="toc-number">1.3.3.</span> <span class="toc-text">求最小依赖集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F-r-%E6%97%A0%E6%8D%9F%E5%88%86%E8%A7%A3%E4%B8%94%E4%BF%9D%E6%8C%81%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96%E5%9C%B0%E5%88%86%E8%A7%A3%E6%88%90-3nf"><span class="toc-number">1.3.4.</span> <span class="toc-text">把关系模式 R 无损分解且保持函数依赖地分解成 3NF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%97%A0%E6%8D%9F%E5%88%86%E8%A7%A3"><span class="toc-number">1.3.5.</span> <span class="toc-text">判断无损分解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E4%BF%9D%E6%8C%81%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="toc-number">1.3.6.</span> <span class="toc-text">判断保持函数依赖</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-sql%E8%AF%AD%E5%8F%A5%E4%B8%8E%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0"><span class="toc-number">1.4.</span> <span class="toc-text">（四）SQL语句与关系代数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B1"><span class="toc-number">1.4.1.</span> <span class="toc-text">例1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B2"><span class="toc-number">1.4.2.</span> <span class="toc-text">例2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B3"><span class="toc-number">1.4.3.</span> <span class="toc-text">例3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%8B4"><span class="toc-number">1.4.4.</span> <span class="toc-text">例4</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-e-r-%E5%9B%BE%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.5.</span> <span class="toc-text">（五）E-R 图设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#e-r-%E5%9B%BE%E5%90%91%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.5.1.</span> <span class="toc-text">E-R 图向关系模型的转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E7%AC%AC%E4%BA%8C%E8%BD%AE%E5%A4%8D%E4%B9%A0%E8%A1%A5%E5%85%85%E5%86%85%E5%AE%B9"><span class="toc-number">1.6.</span> <span class="toc-text">（六）第二轮复习补充内容</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%919%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AD%98%E5%82%A8%E7%BB%84%E7%BB%87%E5%8F%8A%E7%AE%A1%E7%90%86/" title="(编译9)运行时的存储组织及管理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2151.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="(编译9)运行时的存储组织及管理"/></a><div class="content"><a class="title" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%919%EF%BC%89%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84%E5%AD%98%E5%82%A8%E7%BB%84%E7%BB%87%E5%8F%8A%E7%AE%A1%E7%90%86/" title="(编译9)运行时的存储组织及管理">(编译9)运行时的存储组织及管理</a><time datetime="2026-01-17T08:13:56.827Z" title="发表于 2026-01-17 16:13:56">2026-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%9113%EF%BC%89%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E9%87%8D%E7%82%B9%E5%A4%A7%E7%BA%B2/" title="(编译13)简答题提纲"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2155.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="(编译13)简答题提纲"/></a><div class="content"><a class="title" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%9113%EF%BC%89%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E9%87%8D%E7%82%B9%E5%A4%A7%E7%BA%B2/" title="(编译13)简答题提纲">(编译13)简答题提纲</a><time datetime="2026-01-17T08:13:56.794Z" title="发表于 2026-01-17 16:13:56">2026-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%9112%EF%BC%89%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/" title="(编译12)补充内容"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2154.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="(编译12)补充内容"/></a><div class="content"><a class="title" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%9112%EF%BC%89%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9/" title="(编译12)补充内容">(编译12)补充内容</a><time datetime="2026-01-17T08:13:56.791Z" title="发表于 2026-01-17 16:13:56">2026-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%910%EF%BC%89%E4%B8%8A%E6%9C%BA%E9%A2%98%E7%9B%AE/" title="(编译0)上机考试题目预测"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2146.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="(编译0)上机考试题目预测"/></a><div class="content"><a class="title" href="/2026/01/17/%EF%BC%88%E7%BC%96%E8%AF%910%EF%BC%89%E4%B8%8A%E6%9C%BA%E9%A2%98%E7%9B%AE/" title="(编译0)上机考试题目预测">(编译0)上机考试题目预测</a><time datetime="2026-01-17T08:13:56.780Z" title="发表于 2026-01-17 16:13:56">2026-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2026/01/17/%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%89%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B/" title="算法设计与分析"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../images/%E6%96%87%E7%AB%A0%E5%B0%81%E9%9D%A2120.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="算法设计与分析"/></a><div class="content"><a class="title" href="/2026/01/17/%EF%BC%88%E7%AE%97%E6%B3%95%EF%BC%89%E5%88%86%E8%80%8C%E6%B2%BB%E4%B9%8B/" title="算法设计与分析">算法设计与分析</a><time datetime="2026-01-17T08:13:56.778Z" title="发表于 2026-01-17 16:13:56">2026-01-17</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2026 By <a class="footer-bar-link" href="/" title="Destiny" target="_blank">Destiny</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">101</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" rel="external nofollow noreferrer" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener external nofollow noreferrer" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/LLM%E4%B8%8E%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">LLM与强化学习<sup>4</sup></a><a href="/tags/Python%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">Python与机器学习<sup>31</sup></a><a href="/tags/%E4%B8%93%E4%B8%9A%E8%AF%BE/" style="font-size: 0.88rem;">专业课<sup>33</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>28</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Destiny 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script async data-pjax src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.1/bubble/bubble.js"></script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>